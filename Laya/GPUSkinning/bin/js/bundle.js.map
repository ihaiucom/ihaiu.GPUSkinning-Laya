{"version":3,"file":"bundle.js","sources":["../../src/_test/TestSene.ts","../../src/Materials/MBaseMaterial.ts","../../src/Materials/Cartoon2Material.ts","../../src/Materials/MaterialInstall.ts","../../src/GPUSkinning/GPUSKinningCullingMode.ts","../../src/GPUSkinning/GPUSkinningBetterList.ts","../../src/GPUSkinning/GPUSkinningExecuteOncePerFrame.ts","../../src/GPUSkinning/GPUSkinningMaterial.ts","../../src/GPUSkinning/MaterialState.ts","../../src/GPUSkinning/Datas/GPUSkinningQuality.ts","../../src/GPUSkinning/GPUSkinningPlayerResources.ts","../../src/GPUSkinning/GPUSkinningPlayerMonoManager.ts","../../src/GPUSkinning/GPUSkinningPlayerJoint.ts","../../src/GPUSkinning/Datas/GPUSkinningWrapMode.ts","../../src/GPUSkinning/GPUSkinningPlayer.ts","../../src/GPUSkinning/GPUSkinningPlayerMono.ts","../../src/GPUSkinning/Mesh/GPUSkiningVertexMesh.ts","../../src/GPUSkinning/Mesh/GPUSkiningLoadModelV05.ts","../../src/GPUSkinning/Mesh/GPUSkiningMeshReader.ts","../../src/GPUSkinning/Mesh/GPUSkiningMesh.ts","../../src/GPUSkinning/Mesh/Laya3D_Extend.ts","../../src/GPUSkinning/Datas/ByteReadUtil.ts","../../src/GPUSkinning/Datas/GPUSkinningBone.ts","../../src/GPUSkinning/Datas/GPUSkinningAnimEvent.ts","../../src/GPUSkinning/Datas/GPUSkinningFrame.ts","../../src/GPUSkinning/Datas/GPUSkinningClip.ts","../../src/GPUSkinning/Datas/GPUSkinningAnimation.ts","../../src/GPUSkinning/Material/GPUSkinningBaseMaterial.ts","../../src/GPUSkinning/Material/GPUSkinningUnlitMaterial.ts","../../src/LayaExtends/LayaUtil.ts","../../src/LayaExtends/LayaExtends_Node.ts","../../src/LayaExtends/LayaExtends_Texture2D.ts","../../src/GPUSkinning/GPUSkining.ts","../../src/_test/TestShader.ts","../../src/ui/layaMaxUI.ts","../../src/script/GameUI.ts","../../src/GameConfig.ts","../../src/_test/TestMain.ts"],"sourcesContent":["import Vector3 = Laya.Vector3;\nexport class TestScene extends Laya.Scene3D\n{\n    static create(): TestScene\n    {\n        let node = new TestScene();\n        node.name = \"WarScene\";\n\n        let scene = node;\n        scene.init()\n        return scene;\n    }\n\n    /** 场景根节点 */\n    sceneRoot:Laya.Sprite3D;\n\n    /** 地图节点 */\n    mapNode: Laya.Sprite3D;\n\n    /** 摄像机 */\n    camera:Laya.Camera;\n    cameraNode:Laya.Sprite3D;\n\n    /** 屏幕空间层 */\n    screen3DLayer:Laya.Sprite3D;\n\n    /** 灯光 */\n    directionLight:Laya.DirectionLight;\n\n    \n    init()\n    {\n        window['warScene'] = this;\n\n        this.initCamera();\n    }\n\n    \n    initCamera()\n    {\n        var cameraRootNode: Laya.Sprite3D = new Laya.Sprite3D(\"CameraRoot\");\n        var cameraRotationXNode: Laya.Sprite3D = new Laya.Sprite3D(\"CameraRotationX\");\n        var camera:Laya.Camera = new Laya.Camera(0, 0.1, 1000);\n        var screenLayer: Laya.Sprite3D = new Laya.Sprite3D(\"ScreenLayer\");\n\n        cameraRootNode.addChild(cameraRotationXNode);\n        cameraRotationXNode.addChild(camera);\n        camera.addChild(screenLayer);\n\n        cameraRotationXNode.transform.localRotationEulerX = -20;\n        camera.transform.localPosition = new Vector3(0, 0, 200);\n\n        camera.clearColor = new Laya.Vector4(0.2, 0.5, 0.8, 1);\n        camera.orthographic = true;\n        camera.orthographicVerticalSize = 5.2;\n        camera.farPlane = 2000;\n        \n\n        \n        this.camera = camera;\n        this.cameraNode = cameraRootNode;\n        this.screen3DLayer = screenLayer;\n\n        \n        //创建平行光\n        let directionLight: Laya.DirectionLight =<Laya.DirectionLight> this.addChild(new Laya.DirectionLight());\n\t\tdirectionLight.color = new Laya.Vector3(1, 1, 1);\n\t\tthis.lightRotaitonSrc= directionLight.transform.localRotationEuler = new Laya.Vector3(125, 68, 106);\n\t\tthis.directionLight = directionLight;\n        \n\n        this.addChild(cameraRootNode);\n        this.addChild(directionLight);\n        \n    }\n\n    lightRotaitonSrc:Vector3;\n    lightRotaiton:Vector3;\n    lightRotaitonStart()\n    {\n        this.lightRotaiton = this.directionLight.transform.localRotationEuler;\n        Laya.timer.frameLoop(1, this, this.onLightRotaitonLoop)\n    }\n\n    \n    lightRotaitonStop()\n    {\n        this.directionLight.transform.localRotationEuler = this.lightRotaitonSrc;\n        Laya.timer.clear(this, this.onLightRotaitonLoop)\n    }\n    \n    onLightRotaitonLoop()\n    {\n        this.lightRotaiton.x += 1;\n        this.lightRotaiton.y += 2;\n        this.lightRotaiton.z += 2;\n\n        this.directionLight.transform.localRotationEuler = this.lightRotaiton;\n    }\n    \n}\n\n","export class MBaseMaterial extends Laya.Material\n{\n    static SHADER_PATH_ROOT = \"res/shaders/\";\n    \n    // 获取--Shader路径--vs\n    static getShaderVS(filename: string)\n    {\n        return this.SHADER_PATH_ROOT + filename  + \".vs\";\n    }\n\n    // 获取--Shader路径--ps\n    static getShaderPS(filename: string)\n    {\n        return this.SHADER_PATH_ROOT + filename  + \".fs\";\n    }\n    \n    // 加载Shader\n    static async loadShaderVSAsync(filename: string): Promise<string>\n    {\n        let code = await this.loadAsync(this.getShaderVS(filename), Laya.Loader.TEXT);\n        return code.replace(/\\r/g, \"\");\n    }\n\n    // 加载Shader\n    static async loadShaderPSAsync(filename: string): Promise<string>\n    {\n        let code =  await this.loadAsync(this.getShaderPS(filename), Laya.Loader.TEXT);\n        return code.replace(/\\r/g, \"\");\n    }\n\n    \n    // 加载资源, 异步\n    static async loadAsync(path: string, type: string): Promise<any>\n    {\n        return new Promise<any>((resolve)=>\n        {\n            Laya.loader.load(path, \n                Laya.Handler.create(null, (res: any) =>\n                {\n                    resolve(res);\n                }), \n                null, type);\n         });\n    }\n}","import { MBaseMaterial } from \"./MBaseMaterial\";\n\nimport Shader3D = Laya.Shader3D;\nimport SubShader = Laya.SubShader;\nimport SkinnedMeshSprite3D = Laya.SkinnedMeshSprite3D;\nimport VertexMesh = Laya.VertexMesh;\nimport ShaderDefine = Laya.ShaderDefine;\nimport BaseMaterial = Laya.BaseMaterial;\nimport Vector4 = Laya.Vector4;\nimport RenderState = Laya.RenderState;\nimport Scene3DShaderDeclaration = Laya.Scene3DShaderDeclaration;\n\n\n\nexport class Cartoon2Material extends MBaseMaterial\n{\n    \n    /** Shader名称 */\n    public static shaderName = \"Cartoon2Shader\";\n\n    public static defaultMaterial:Cartoon2Material;\n\n    public static async install()\n    {\n        this.__initDefine__();\n        await this.initShader();\n\n        this.defaultMaterial = new Cartoon2Material();\n        this.defaultMaterial.enableLighting = true;\n        this.defaultMaterial.lock = true;\n    }\n\n    private static async initShader()\n    {\n        \n        var outlineVS: string = await this.loadShaderVSAsync(\"Cartoon2OutlineShader\");\n        var outlinePS: string = await this.loadShaderPSAsync(\"Cartoon2OutlineShader\");\n\n        var vs: string = await this.loadShaderVSAsync(this.shaderName);\n        var ps: string = await this.loadShaderPSAsync(this.shaderName);\n        \n\n        \n        \n        var attributeMap: object;\n        var uniformMap: object;\n        var stateMap: object;\n        var shader:Shader3D;\n        var subShader:SubShader;\n\n        attributeMap = \n        {\n\t\t\t'a_Position': VertexMesh.MESH_POSITION0,\n\t\t\t'a_Color': VertexMesh.MESH_COLOR0,\n\t\t\t'a_Normal': VertexMesh.MESH_NORMAL0,\n\t\t\t'a_Texcoord0': VertexMesh.MESH_TEXTURECOORDINATE0,\n\t\t\t'a_Texcoord1': VertexMesh.MESH_TEXTURECOORDINATE1,\n\t\t\t'a_BoneWeights': VertexMesh.MESH_BLENDWEIGHT0,\n\t\t\t'a_BoneIndices': VertexMesh.MESH_BLENDINDICES0,\n\t\t\t'a_Tangent0': VertexMesh.MESH_TANGENT0,\n\t\t\t'a_MvpMatrix': VertexMesh.MESH_MVPMATRIX_ROW0,\n\t\t\t'a_WorldMat': VertexMesh.MESH_WORLDMATRIX_ROW0\n\t\t};\n\n        uniformMap = \n        {\n\t\t\t'u_Bones': Shader3D.PERIOD_CUSTOM,\n\t\t\t'u_DiffuseTexture': Shader3D.PERIOD_MATERIAL,\n\t\t\t'u_SpecularTexture': Shader3D.PERIOD_MATERIAL,\n\t\t\t'u_NormalTexture': Shader3D.PERIOD_MATERIAL,\n\t\t\t'u_AlphaTestValue': Shader3D.PERIOD_MATERIAL,\n            'u_DiffuseColor': Shader3D.PERIOD_MATERIAL,\n            // 卡通材质 -- 颜色强调\n\t\t\t'u_ShadowColor': Shader3D.PERIOD_MATERIAL,\n\t\t\t'u_MaterialSpecular': Shader3D.PERIOD_MATERIAL,\n            'u_Shininess': Shader3D.PERIOD_MATERIAL,\n            // 卡通材质 -- 颜色强调\n            'u_ColorRange': Shader3D.PERIOD_MATERIAL,\n            // 卡通材质 -- 颜色范围\n            'u_ColorDeep': Shader3D.PERIOD_MATERIAL,\n            // 卡通材质 -- 描边粗细\n            'u_OutlineWidth': Shader3D.PERIOD_MATERIAL,\n            \n            \n\t\t\t'u_TilingOffset': Shader3D.PERIOD_MATERIAL,\n\n\t\t\t'u_WorldMat': Shader3D.PERIOD_SPRITE,\n\t\t\t'u_MvpMatrix': Shader3D.PERIOD_SPRITE,\n\t\t\t'u_LightmapScaleOffset': Shader3D.PERIOD_SPRITE,\n\t\t\t'u_LightMap': Shader3D.PERIOD_SPRITE,\n\n\t\t\t'u_CameraPos': Shader3D.PERIOD_CAMERA,\n\t\t\t'u_Viewport': Shader3D.PERIOD_CAMERA,\n\t\t\t'u_ProjectionParams': Shader3D.PERIOD_CAMERA,\n\t\t\t'u_View': Shader3D.PERIOD_CAMERA,\n\n\t\t\t'u_ReflectTexture': Shader3D.PERIOD_SCENE,\n\t\t\t'u_ReflectIntensity': Shader3D.PERIOD_SCENE,\n\t\t\t'u_FogStart': Shader3D.PERIOD_SCENE,\n\t\t\t'u_FogRange': Shader3D.PERIOD_SCENE,\n\t\t\t'u_FogColor': Shader3D.PERIOD_SCENE,\n\t\t\t'u_DirationLightCount': Shader3D.PERIOD_SCENE,\n\t\t\t'u_LightBuffer': Shader3D.PERIOD_SCENE,\n\t\t\t'u_LightClusterBuffer': Shader3D.PERIOD_SCENE,\n\t\t\t'u_AmbientColor': Shader3D.PERIOD_SCENE,\n\t\t\t'u_shadowMap1': Shader3D.PERIOD_SCENE,\n\t\t\t'u_shadowMap2': Shader3D.PERIOD_SCENE,\n\t\t\t'u_shadowMap3': Shader3D.PERIOD_SCENE,\n\t\t\t'u_shadowPSSMDistance': Shader3D.PERIOD_SCENE,\n\t\t\t'u_lightShadowVP': Shader3D.PERIOD_SCENE,\n\t\t\t'u_shadowPCFoffset': Shader3D.PERIOD_SCENE,\n\n\t\t\t//legacy lighting\n\t\t\t'u_DirectionLight.color': Shader3D.PERIOD_SCENE,\n\t\t\t'u_DirectionLight.direction': Shader3D.PERIOD_SCENE,\n\t\t\t'u_PointLight.position': Shader3D.PERIOD_SCENE,\n\t\t\t'u_PointLight.range': Shader3D.PERIOD_SCENE,\n\t\t\t'u_PointLight.color': Shader3D.PERIOD_SCENE,\n\t\t\t'u_SpotLight.position': Shader3D.PERIOD_SCENE,\n\t\t\t'u_SpotLight.direction': Shader3D.PERIOD_SCENE,\n\t\t\t'u_SpotLight.range': Shader3D.PERIOD_SCENE,\n\t\t\t'u_SpotLight.spot': Shader3D.PERIOD_SCENE,\n\t\t\t'u_SpotLight.color': Shader3D.PERIOD_SCENE\n\t\t};\n\n        stateMap = \n        {\n\t\t\t's_Cull': Shader3D.RENDER_STATE_CULL,\n\t\t\t's_Blend': Shader3D.RENDER_STATE_BLEND,\n\t\t\t's_BlendSrc': Shader3D.RENDER_STATE_BLEND_SRC,\n\t\t\t's_BlendDst': Shader3D.RENDER_STATE_BLEND_DST,\n\t\t\t's_DepthTest': Shader3D.RENDER_STATE_DEPTH_TEST,\n\t\t\t's_DepthWrite': Shader3D.RENDER_STATE_DEPTH_WRITE\n\t\t};\n\n        \n\n        \n        shader = Shader3D.add(this.shaderName, null, null, true);\n        subShader =  new SubShader(attributeMap, uniformMap);\n        shader.addSubShader(subShader);\n        \n        var outlinePass = subShader.addShaderPass(outlineVS, outlinePS);\n        outlinePass.renderState.cull = Laya.RenderState.CULL_FRONT;\n\n        var mainPass =  subShader.addShaderPass(vs, ps, stateMap);\n        mainPass.renderState.cull = Laya.RenderState.CULL_NONE;\n        \n        \n    }\n\n\tstatic SHADERDEFINE_DIFFUSEMAP: ShaderDefine;\n\tstatic SHADERDEFINE_NORMALMAP: ShaderDefine;\n\tstatic SHADERDEFINE_SPECULARMAP: ShaderDefine;\n\tstatic SHADERDEFINE_TILINGOFFSET: ShaderDefine;\n\tstatic SHADERDEFINE_ENABLEVERTEXCOLOR: ShaderDefine;\n    \n    static __initDefine__() \n    {\n        \n\t\tthis.SHADERDEFINE_DIFFUSEMAP = Shader3D.getDefineByName(\"DIFFUSEMAP\");\n\t\tthis.SHADERDEFINE_NORMALMAP = Shader3D.getDefineByName(\"NORMALMAP\");\n\t\tthis.SHADERDEFINE_SPECULARMAP = Shader3D.getDefineByName(\"SPECULARMAP\");\n\t\tthis.SHADERDEFINE_TILINGOFFSET = Shader3D.getDefineByName(\"TILINGOFFSET\");\n        this.SHADERDEFINE_ENABLEVERTEXCOLOR = Shader3D.getDefineByName(\"ENABLEVERTEXCOLOR\");\n\n    }\n\n\n\n    \n\t/**高光强度数据源_漫反射贴图的Alpha通道。*/\n\tstatic SPECULARSOURCE_DIFFUSEMAPALPHA: number;\n\t/**高光强度数据源_高光贴图的RGB通道。*/\n\tstatic SPECULARSOURCE_SPECULARMAP: number;\n\n\t/**渲染状态_不透明。*/\n\tstatic RENDERMODE_OPAQUE: number = 0;\n\t/**渲染状态_阿尔法测试。*/\n\tstatic RENDERMODE_CUTOUT: number = 1;\n\t/**渲染状态_透明混合。*/\n\tstatic RENDERMODE_TRANSPARENT: number = 2;\n    \n\n\tstatic ALBEDOTEXTURE: number = Shader3D.propertyNameToID(\"u_DiffuseTexture\");\n\tstatic NORMALTEXTURE: number = Shader3D.propertyNameToID(\"u_NormalTexture\");\n\tstatic SPECULARTEXTURE: number = Shader3D.propertyNameToID(\"u_SpecularTexture\");\n   \n    // 卡通材质 -- 主颜色\n    static ALBEDOCOLOR: number = Shader3D.propertyNameToID(\"u_DiffuseColor\");\n    // 卡通材质 -- 阴影颜色\n    static SHADOWCOLOR: number = Shader3D.propertyNameToID(\"u_ShadowColor\");\n    \n\tstatic MATERIALSPECULAR: number = Shader3D.propertyNameToID(\"u_MaterialSpecular\");\n    static SHININESS: number = Shader3D.propertyNameToID(\"u_Shininess\");\n\n    // 卡通材质 -- 颜色强调\n    static COLOR_RANGE: number = Shader3D.propertyNameToID(\"u_ColorRange\");\n    // 卡通材质 -- 颜色范围\n    static COLOR_DEEP: number = Shader3D.propertyNameToID(\"u_ColorDeep\");\n    // 卡通材质 -- 描边粗细\n    static OUTLINE_WIDTH: number = Shader3D.propertyNameToID(\"u_OutlineWidth\");\n    \n\tstatic TILINGOFFSET: number = Shader3D.propertyNameToID(\"u_TilingOffset\");\n\tstatic CULL: number = Shader3D.propertyNameToID(\"s_Cull\");\n\tstatic BLEND: number = Shader3D.propertyNameToID(\"s_Blend\");\n\tstatic BLEND_SRC: number = Shader3D.propertyNameToID(\"s_BlendSrc\");\n\tstatic BLEND_DST: number = Shader3D.propertyNameToID(\"s_BlendDst\");\n\tstatic DEPTH_TEST: number = Shader3D.propertyNameToID(\"s_DepthTest\");\n\tstatic DEPTH_WRITE: number = Shader3D.propertyNameToID(\"s_DepthWrite\");\n\n    \n    // 卡通材质 -- 主颜色\n\tprivate _albedoColor: Vector4;\n    // 卡通材质 -- 阴影颜色\n\tprivate _shadowColor: Vector4;\n\tprivate _albedoIntensity: number;\n\tprivate _enableLighting: boolean;\n\tprivate _enableVertexColor: boolean = false;\n\n    constructor()\n    {\n        super();\n\n        \n        this._enableVertexColor = false;\n        this.setShaderName(Cartoon2Material.shaderName);\n        this._albedoIntensity = 1.0;\n        // 卡通材质 -- 主颜色\n        this._albedoColor = new Vector4(1.0, 1.0, 1.0, 1.0);\n        // 卡通材质 -- 阴影颜色\n        this._shadowColor = new Vector4(0.1764706, 0.1764706, 0.1764706, 1.0);\n        var sv = this._shaderValues;\n        // 卡通材质 -- 主颜色\n        sv.setVector(Cartoon2Material.ALBEDOCOLOR, new Vector4(1.0, 1.0, 1.0, 1.0));\n        sv.setVector(Cartoon2Material.MATERIALSPECULAR, new Vector4(1.0, 1.0, 1.0, 1.0));\n        sv.setNumber(Cartoon2Material.SHININESS, 0.078125);\n\n        // 卡通材质 -- 阴影颜色\n        sv.setVector(Cartoon2Material.SHADOWCOLOR, new Vector4(0.1764706, 0.1764706, 0.1764706, 1.0));\n        // 卡通材质 -- 颜色强调\n        sv.setNumber(Cartoon2Material.COLOR_RANGE, 88.4);\n        // 卡通材质 -- 颜色范围\n        sv.setNumber(Cartoon2Material.COLOR_DEEP, 0.08);\n        // 卡通材质 -- 描边粗细\n        sv.setNumber(Cartoon2Material.OUTLINE_WIDTH, 0.004);\n\n        sv.setNumber(BaseMaterial.ALPHATESTVALUE, 0.5);\n        sv.setVector(Cartoon2Material.TILINGOFFSET, new Vector4(1.0, 1.0, 0.0, 0.0));\n        this._enableLighting = true;\n        this.renderMode = Cartoon2Material.RENDERMODE_OPAQUE;\n\n    }\n\n    get _ColorR() {\n        return this._albedoColor.x;\n    }\n    set _ColorR(value) {\n        this._albedoColor.x = value;\n        this.albedoColor = this._albedoColor;\n    }\n    get _ColorG() {\n        return this._albedoColor.y;\n    }\n    set _ColorG(value) {\n        this._albedoColor.y = value;\n        this.albedoColor = this._albedoColor;\n    }\n    get _ColorB() {\n        return this._albedoColor.z;\n    }\n    set _ColorB(value) {\n        this._albedoColor.z = value;\n        this.albedoColor = this._albedoColor;\n    }\n    get _ColorA() {\n        return this._albedoColor.w;\n    }\n    set _ColorA(value) {\n        this._albedoColor.w = value;\n        this.albedoColor = this._albedoColor;\n    }\n    get _SpecColorR() {\n        return this._shaderValues.getVector(Cartoon2Material.MATERIALSPECULAR).x;\n    }\n    set _SpecColorR(value) {\n        this._shaderValues.getVector(Cartoon2Material.MATERIALSPECULAR).x = value;\n    }\n    get _SpecColorG() {\n        return this._shaderValues.getVector(Cartoon2Material.MATERIALSPECULAR).y;\n    }\n    set _SpecColorG(value) {\n        this._shaderValues.getVector(Cartoon2Material.MATERIALSPECULAR).y = value;\n    }\n    get _SpecColorB() {\n        return this._shaderValues.getVector(Cartoon2Material.MATERIALSPECULAR).z;\n    }\n    set _SpecColorB(value) {\n        this._shaderValues.getVector(Cartoon2Material.MATERIALSPECULAR).z = value;\n    }\n    get _SpecColorA() {\n        return this._shaderValues.getVector(Cartoon2Material.MATERIALSPECULAR).w;\n    }\n    set _SpecColorA(value) {\n        this._shaderValues.getVector(Cartoon2Material.MATERIALSPECULAR).w = value;\n    }\n    get _AlbedoIntensity() {\n        return this._albedoIntensity;\n    }\n    set _AlbedoIntensity(value) {\n        if (this._albedoIntensity !== value) {\n            var finalAlbedo = this._shaderValues.getVector(Cartoon2Material.ALBEDOCOLOR);\n            Vector4.scale(this._albedoColor, value, finalAlbedo);\n            this._albedoIntensity = value;\n            this._shaderValues.setVector(Cartoon2Material.ALBEDOCOLOR, finalAlbedo);\n        }\n    }\n\n\n    get _Shininess() {\n        return this._shaderValues.getNumber(Cartoon2Material.SHININESS);\n    }\n    set _Shininess(value) {\n        value = Math.max(0.0, Math.min(1.0, value));\n        this._shaderValues.setNumber(Cartoon2Material.SHININESS, value);\n    }\n\n    \n    /** 卡通材质 -- 颜色强调 */\n    get _ColorRange() {\n        return this._shaderValues.getNumber(Cartoon2Material.COLOR_RANGE);\n    }\n    set _ColorRange(value) {\n        value = Math.max(-1.0, Math.min(100.0, value));\n        this._shaderValues.setNumber(Cartoon2Material.COLOR_RANGE, value);\n    }\n\n    \n    \n    /** 卡通材质 -- 颜色范围 */\n    get _ColorDeep() {\n        return this._shaderValues.getNumber(Cartoon2Material.COLOR_DEEP);\n    }\n    set _ColorDeep(value) {\n        value = Math.max(0.0, Math.min(2, value));\n        this._shaderValues.setNumber(Cartoon2Material.COLOR_DEEP, value);\n    }\n\n    /** 卡通材质 -- 描边粗细 */\n    get _OutlineWidth() {\n        return this._shaderValues.getNumber(Cartoon2Material.OUTLINE_WIDTH);\n    }\n    set _OutlineWidth(value) {\n        this._shaderValues.setNumber(Cartoon2Material.OUTLINE_WIDTH, value);\n    }\n\n\n    get _MainTex_STX() {\n        return this._shaderValues.getVector(Cartoon2Material.TILINGOFFSET).x;\n    }\n    set _MainTex_STX(x) {\n        var tilOff = this._shaderValues.getVector(Cartoon2Material.TILINGOFFSET);\n        tilOff.x = x;\n        this.tilingOffset = tilOff;\n    }\n    get _MainTex_STY() {\n        return this._shaderValues.getVector(Cartoon2Material.TILINGOFFSET).y;\n    }\n    set _MainTex_STY(y) {\n        var tilOff = this._shaderValues.getVector(Cartoon2Material.TILINGOFFSET);\n        tilOff.y = y;\n        this.tilingOffset = tilOff;\n    }\n    get _MainTex_STZ() {\n        return this._shaderValues.getVector(Cartoon2Material.TILINGOFFSET).z;\n    }\n    set _MainTex_STZ(z) {\n        var tilOff = this._shaderValues.getVector(Cartoon2Material.TILINGOFFSET);\n        tilOff.z = z;\n        this.tilingOffset = tilOff;\n    }\n    get _MainTex_STW() {\n        return this._shaderValues.getVector(Cartoon2Material.TILINGOFFSET).w;\n    }\n    set _MainTex_STW(w) {\n        var tilOff = this._shaderValues.getVector(Cartoon2Material.TILINGOFFSET);\n        tilOff.w = w;\n        this.tilingOffset = tilOff;\n    }\n    get _Cutoff() {\n        return this.alphaTestValue;\n    }\n    set _Cutoff(value) {\n        this.alphaTestValue = value;\n    }\n    set renderMode(value) {\n        switch (value) {\n            case Cartoon2Material.RENDERMODE_OPAQUE:\n                this.alphaTest = false;\n                this.renderQueue = BaseMaterial.RENDERQUEUE_OPAQUE;\n                this.depthWrite = true;\n                this.cull = RenderState.CULL_BACK;\n                this.blend = RenderState.BLEND_DISABLE;\n                this.depthTest = RenderState.DEPTHTEST_LESS;\n                break;\n            case Cartoon2Material.RENDERMODE_CUTOUT:\n                this.renderQueue = BaseMaterial.RENDERQUEUE_ALPHATEST;\n                this.alphaTest = true;\n                this.depthWrite = true;\n                this.cull = RenderState.CULL_BACK;\n                this.blend = RenderState.BLEND_DISABLE;\n                this.depthTest = RenderState.DEPTHTEST_LESS;\n                break;\n            case Cartoon2Material.RENDERMODE_TRANSPARENT:\n                this.renderQueue = BaseMaterial.RENDERQUEUE_TRANSPARENT;\n                this.alphaTest = false;\n                this.depthWrite = false;\n                this.cull = RenderState.CULL_BACK;\n                this.blend = RenderState.BLEND_ENABLE_ALL;\n                this.blendSrc = RenderState.BLENDPARAM_SRC_ALPHA;\n                this.blendDst = RenderState.BLENDPARAM_ONE_MINUS_SRC_ALPHA;\n                this.depthTest = RenderState.DEPTHTEST_LESS;\n                break;\n            default:\n                throw new Error(\"Material:renderMode value error.\");\n        }\n    }\n    get enableVertexColor() {\n        return this._enableVertexColor;\n    }\n    set enableVertexColor(value) {\n        this._enableVertexColor = value;\n        if (value)\n            this._shaderValues.addDefine(Cartoon2Material.SHADERDEFINE_ENABLEVERTEXCOLOR);\n        else\n            this._shaderValues.removeDefine(Cartoon2Material.SHADERDEFINE_ENABLEVERTEXCOLOR);\n    }\n    get tilingOffsetX() {\n        return this._MainTex_STX;\n    }\n    set tilingOffsetX(x) {\n        this._MainTex_STX = x;\n    }\n    get tilingOffsetY() {\n        return this._MainTex_STY;\n    }\n    set tilingOffsetY(y) {\n        this._MainTex_STY = y;\n    }\n    get tilingOffsetZ() {\n        return this._MainTex_STZ;\n    }\n    set tilingOffsetZ(z) {\n        this._MainTex_STZ = z;\n    }\n    get tilingOffsetW() {\n        return this._MainTex_STW;\n    }\n    set tilingOffsetW(w) {\n        this._MainTex_STW = w;\n    }\n    get tilingOffset() {\n        return this._shaderValues.getVector(Cartoon2Material.TILINGOFFSET);\n    }\n    set tilingOffset(value) {\n        if (value) {\n            if (value.x != 1 || value.y != 1 || value.z != 0 || value.w != 0)\n                this._shaderValues.addDefine(Cartoon2Material.SHADERDEFINE_TILINGOFFSET);\n            else\n                this._shaderValues.removeDefine(Cartoon2Material.SHADERDEFINE_TILINGOFFSET);\n        }\n        else {\n            this._shaderValues.removeDefine(Cartoon2Material.SHADERDEFINE_TILINGOFFSET);\n        }\n        this._shaderValues.setVector(Cartoon2Material.TILINGOFFSET, value);\n    }\n    get albedoColorR() {\n        return this._ColorR;\n    }\n    set albedoColorR(value) {\n        this._ColorR = value;\n    }\n    get albedoColorG() {\n        return this._ColorG;\n    }\n    set albedoColorG(value) {\n        this._ColorG = value;\n    }\n    get albedoColorB() {\n        return this._ColorB;\n    }\n    set albedoColorB(value) {\n        this._ColorB = value;\n    }\n    get albedoColorA() {\n        return this._ColorA;\n    }\n    set albedoColorA(value) {\n        this._ColorA = value;\n    }\n\n    // 卡通材质 -- 主颜色\n    get albedoColor() {\n        return this._albedoColor;\n    }\n    set albedoColor(value) {\n        var finalAlbedo = this._shaderValues.getVector(Cartoon2Material.ALBEDOCOLOR);\n        Vector4.scale(value, this._albedoIntensity, finalAlbedo);\n        this._albedoColor = value;\n        this._shaderValues.setVector(Cartoon2Material.ALBEDOCOLOR, finalAlbedo);\n    }\n\n    \n    // 卡通材质 -- 阴影颜色\n    get shadowColor() {\n        return this._shadowColor;\n    }\n    set shadowColor(value) {\n        this._albedoColor = value;\n        this._shaderValues.setVector(Cartoon2Material.ALBEDOCOLOR, value);\n    }\n\n\n    get albedoIntensity() {\n        return this._albedoIntensity;\n    }\n    set albedoIntensity(value) {\n        this._AlbedoIntensity = value;\n    }\n    get specularColorR() {\n        return this._SpecColorR;\n    }\n    set specularColorR(value) {\n        this._SpecColorR = value;\n    }\n    get specularColorG() {\n        return this._SpecColorG;\n    }\n    set specularColorG(value) {\n        this._SpecColorG = value;\n    }\n    get specularColorB() {\n        return this._SpecColorB;\n    }\n    set specularColorB(value) {\n        this._SpecColorB = value;\n    }\n    get specularColorA() {\n        return this._SpecColorA;\n    }\n    set specularColorA(value) {\n        this._SpecColorA = value;\n    }\n    get specularColor() {\n        return this._shaderValues.getVector(Cartoon2Material.MATERIALSPECULAR);\n    }\n    set specularColor(value) {\n        this._shaderValues.setVector(Cartoon2Material.MATERIALSPECULAR, value);\n    }\n    get shininess() {\n        return this._Shininess;\n    }\n    set shininess(value) {\n        this._Shininess = value;\n    }\n    get albedoTexture() {\n        return this._shaderValues.getTexture(Cartoon2Material.ALBEDOTEXTURE);\n    }\n    set albedoTexture(value) {\n        if (value)\n            this._shaderValues.addDefine(Cartoon2Material.SHADERDEFINE_DIFFUSEMAP);\n        else\n            this._shaderValues.removeDefine(Cartoon2Material.SHADERDEFINE_DIFFUSEMAP);\n        this._shaderValues.setTexture(Cartoon2Material.ALBEDOTEXTURE, value);\n    }\n    get normalTexture() {\n        return this._shaderValues.getTexture(Cartoon2Material.NORMALTEXTURE);\n    }\n    set normalTexture(value) {\n        if (value)\n            this._shaderValues.addDefine(Cartoon2Material.SHADERDEFINE_NORMALMAP);\n        else\n            this._shaderValues.removeDefine(Cartoon2Material.SHADERDEFINE_NORMALMAP);\n        this._shaderValues.setTexture(Cartoon2Material.NORMALTEXTURE, value);\n    }\n    get specularTexture() {\n        return this._shaderValues.getTexture(Cartoon2Material.SPECULARTEXTURE);\n    }\n    set specularTexture(value) {\n        if (value)\n            this._shaderValues.addDefine(Cartoon2Material.SHADERDEFINE_SPECULARMAP);\n        else\n            this._shaderValues.removeDefine(Cartoon2Material.SHADERDEFINE_SPECULARMAP);\n        this._shaderValues.setTexture(Cartoon2Material.SPECULARTEXTURE, value);\n    }\n    \n\n\t/**\n\t * 是否启用光照。\n\t */\n\tget enableLighting(): boolean {\n\t\treturn this._enableLighting;\n\t}\n\n\tset enableLighting(value: boolean) {\n\t\tif (this._enableLighting !== value) {\n\t\t\tif (value) {\n\t\t\t\tthis._disablePublicDefineDatas.remove(Scene3DShaderDeclaration.SHADERDEFINE_POINTLIGHT);\n\t\t\t\tthis._disablePublicDefineDatas.remove(Scene3DShaderDeclaration.SHADERDEFINE_SPOTLIGHT);\n\t\t\t\tthis._disablePublicDefineDatas.remove(Scene3DShaderDeclaration.SHADERDEFINE_DIRECTIONLIGHT);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._disablePublicDefineDatas.add(Scene3DShaderDeclaration.SHADERDEFINE_POINTLIGHT);\n\t\t\t\tthis._disablePublicDefineDatas.add(Scene3DShaderDeclaration.SHADERDEFINE_SPOTLIGHT);\n\t\t\t\tthis._disablePublicDefineDatas.add(Scene3DShaderDeclaration.SHADERDEFINE_DIRECTIONLIGHT);\n\t\t\t}\n\t\t\tthis._enableLighting = value;\n\t\t}\n    }\n    \n    set depthWrite(value) {\n        this._shaderValues.setBool(Cartoon2Material.DEPTH_WRITE, value);\n    }\n    get depthWrite() {\n        return this._shaderValues.getBool(Cartoon2Material.DEPTH_WRITE);\n    }\n    set cull(value) {\n        this._shaderValues.setInt(Cartoon2Material.CULL, value);\n    }\n    get cull() {\n        return this._shaderValues.getInt(Cartoon2Material.CULL);\n    }\n    set blend(value) {\n        this._shaderValues.setInt(Cartoon2Material.BLEND, value);\n    }\n    get blend() {\n        return this._shaderValues.getInt(Cartoon2Material.BLEND);\n    }\n    set blendSrc(value) {\n        this._shaderValues.setInt(Cartoon2Material.BLEND_SRC, value);\n    }\n    get blendSrc() {\n        return this._shaderValues.getInt(Cartoon2Material.BLEND_SRC);\n    }\n    set blendDst(value) {\n        this._shaderValues.setInt(Cartoon2Material.BLEND_DST, value);\n    }\n    get blendDst() {\n        return this._shaderValues.getInt(Cartoon2Material.BLEND_DST);\n    }\n    set depthTest(value) {\n        this._shaderValues.setInt(Cartoon2Material.DEPTH_TEST, value);\n    }\n    get depthTest() {\n        return this._shaderValues.getInt(Cartoon2Material.DEPTH_TEST);\n    }\n    clone() {\n        var dest = new Cartoon2Material();\n        this.cloneTo(dest);\n        return dest;\n    }\n    cloneTo(destObject) {\n        super.cloneTo(destObject);\n        var destMaterial = destObject;\n        destMaterial._enableLighting = this._enableLighting;\n        destMaterial._albedoIntensity = this._albedoIntensity;\n        destMaterial._enableVertexColor = this._enableVertexColor;\n        this._albedoColor.cloneTo(destMaterial._albedoColor);\n    }\n\n}","import { BlinnPhongMaterial } from \"./BlinnPhongMaterial\";\nimport { HeroMaterial } from \"./HeroMaterial\";\nimport { Cartoon2Material } from \"./Cartoon2Material\";\nimport MaterialParameterConfigManager from \"./MaterialParameterConfigManager\";\nimport DissolveMaterial from \"./DissolveMaterial\";\nimport BloomMaterial from \"./BloomMaterial\";\nimport BloomEffectMaterial from \"./BloomEffectMaterial\";\n\nimport Shader3D = Laya.Shader3D;\nimport ShaderVariant = Laya.ShaderVariant;\n\nexport default class MaterialInstall\n{\n    static async install()\n    {\n        // 3D\n        // await BlinnPhongMaterial.install();\n        await Cartoon2Material.install();\n        // await HeroMaterial.install();\n        // await DissolveMaterial.install();\n        // await BloomMaterial.install();\n        // await BloomEffectMaterial.install();\n\n        // await MaterialParameterConfigManager.LoadConfigAsync();\n\n        // await this.initShader();\n\n    }\n\n    //初始化shader\n    private static async initShader()\n    {\n        // let shaderObj = await Game.asset.loadResAsync(\"res/config/ShaderVariantCollection.json\", Laya.Loader.JSON);\n        // for(let shaderName in shaderObj)\n        // {\n        //     let shader:Shader3D = Shader3D._preCompileShader[shaderName];\n        //     //加载获取得到shaderObj\n        //     let arr :Array<any>= shaderObj[shaderName];\n        //     for (let index = 0; index < arr.length; index++) \n        //     {\n        //         let obj = arr[index];\n        //         let shadervariant = new ShaderVariant(shader, obj.subShaderIndex, obj.passIndex, obj.defineNames);\n        //         //将构建的shadervariant添加到debugShaderVariantCollection中\n        //         Shader3D.debugShaderVariantCollection.add(shadervariant);\n        //     }\n        // }\n      \n        // //预编译shader\n        // Shader3D.debugShaderVariantCollection.compile();\n    }\n\n    \n    /** 导出Shader 预编译 */\n    static exportShaderVariantCollection()\n    {\n        let shaderObj = {};\n        let arr;\n        for(let i = 0;i<Shader3D.debugShaderVariantCollection.variantCount;i++)\n        {\n            let shadervariant:ShaderVariant = Shader3D.debugShaderVariantCollection.getByIndex(i);\n            let shaderName:string = shadervariant.shader.name;\n            if(!shaderObj[shaderName])shaderObj[shaderName] = [];\n            arr = shaderObj[shaderName];\n            let obj:any = {};\n            obj.defineNames = shadervariant.defineNames;\n            obj.passIndex= shadervariant.passIndex;\n            obj.subShaderIndex= shadervariant.subShaderIndex;\n            arr.push(obj);\n        }\n\n        let json = JSON.stringify(shaderObj, null, 4);\n        console.log(json);\n        // saveFile(\"ShaderVariantCollection.json\",json)\n    }\n}\n\nwindow['MaterialInstall'] = MaterialInstall;","/** 裁剪模式 */\nexport enum GPUSKinningCullingMode\n{\n    /** 总是播放 */\n    AlwaysAnimate, \n    /**  */\n    CullUpdateTransforms, \n    /** 裁剪剔除 不播放 */\n    CullCompletely\n}","export default class GPUSkinningBetterList<T>\n{\n    public buffer: T[];\n    public size:int = 0;\n    public bufferIncrement:int = 0;\n\n    public Get(i:int):T\n    {\n        return this.buffer[i];\n    }\n\n    public Set(i:int, value:T)\n    {\n        this.buffer[i] = value;\n    }\n\n    constructor(bufferIncrement: int)\n    {\n        this.bufferIncrement = Math.max(1, bufferIncrement);\n    }\n\n    private AllocateMore()\n    {\n        let newList:T[] = (this.buffer != null) \n            ? new Array<T>(this.buffer.length + this.bufferIncrement) \n            : new Array<T>(this.bufferIncrement);\n\n        if(this.buffer != null && this.size > 0)\n        {\n            arrayCopyValue(this.buffer, newList, false);\n        }\n\n        this.buffer = newList;\n    }\n\n    public Clear()\n    {\n        this.size = 0;\n    }\n\n    public Release()\n    {\n        this.size = 0;\n        this.buffer = null;\n    }\n\n    public Add(item: T)\n    {\n        if(this.buffer == null || this.size == this.buffer.length)\n        {\n            this.AllocateMore();\n        }\n\n        this.buffer[this.size ++] = item;\n    }\n\n    public AddRange(items: T[])\n    {\n        if(items == null)\n        {\n            return;\n        }\n\n        let length = items.length;\n        if(length == 0)\n        {\n            return;\n        }\n\n        if(this.buffer == null)\n        {\n            this.buffer = new Array<T>(Math.max(this.bufferIncrement, length));\n            arrayCopyValue(items, this.buffer, false);\n            this.size = length;\n        }\n        else\n        {\n            if(this.size + length > this.buffer.length)\n            {\n                let newList: T[] = new Array<T>(Math.max(this.buffer.length + this.bufferIncrement, this.size + length));\n                arrayCopyValue(this.buffer, newList, false);\n                this.buffer = newList;\n                for(var i = 0; i < length; i ++)\n                {\n                    this.buffer[this.size + i] = items[i];\n                }\n            }\n            else\n            {\n                for(var i = 0; i < length; i ++)\n                {\n                    this.buffer[this.size + i] = items[i];\n                }\n            }\n            this.size += length;\n        }\n\n    }\n\n\n    public RemoveAt(index: int)\n    {\n        if(this.buffer != null && index > -1 && index < this.size)\n        {\n            this.size --;\n            this.buffer[index] = null;\n            for(let b = index; b < this.size; ++b)\n            {\n                this.buffer[b] = this.buffer[b + 1];\n            }\n\n            this.buffer[this.size] = null;\n        }\n    }\n\n    /** 删除并返回最右一个值 */\n    public Pop():T\n    {\n        if(this.buffer == null || this.size == 0)\n        {\n            return null;\n        }\n\n        --this.size;\n        let t = this.buffer[this.size];\n        this.buffer[this.size] = null;\n        return t;\n    }\n\n    /** 返回最后一个值 */\n    public Peek():T\n    {\n        if(this.buffer == null || this.size == 0)\n        {\n            return null;\n        }\n\n        return this.buffer[this.size - 1];\n\n    }\n\n}","/** 一帧只执行一次标记 */\nexport default class GPUSkinningExecuteOncePerFrame\n{\n    private frameCount: int = -1;\n\n    /** 获取当前帧是否能执行 */\n    public CanBeExecute()\n    {\n        return this.frameCount != Laya.timer.currFrame;\n    }\n\n    /** 标记当前帧已经执行过了 */\n    public MarkAsExecuted()\n    {\n        this.frameCount = Laya.timer.currFrame;\n    }\n}","import GPUSkinningExecuteOncePerFrame from \"./GPUSkinningExecuteOncePerFrame\";\n\n/** GPU骨骼动画--材质球 */\nexport default class GPUSkinningMaterial\n{\n    /** 材质 */\n    material: Laya.Material;\n\n    /** 一帧只执行一次标记 */\n    executeOncePerFrame: GPUSkinningExecuteOncePerFrame = new GPUSkinningExecuteOncePerFrame();\n\n    /** 销毁 */\n    Destroy()\n    {\n        if(this.material)\n        {\n            this.material.destroy();\n            this.material = null;\n        }\n    }\n\n}","/** 材质状态 */\nexport enum MaterialState\n{\n    RootOn_BlendOff = 0, \n    RootOn_BlendOn_CrossFadeRootOn,\n    RootOn_BlendOn_CrossFadeRootOff,\n    RootOff_BlendOff,\n    RootOff_BlendOn_CrossFadeRootOn,\n    RootOff_BlendOn_CrossFadeRootOff, \n    Count = 6\n}","export enum GPUSkinningQuality\n{\n    Bone1 = 1,\n    Bone2 = 2,\n    Bone4 = 4\n}","\nimport GPUSkinningAnimation from \"./Datas/GPUSkinningAnimation\";\nimport GPUSkinningPlayerMono from \"./GPUSkinningPlayerMono\";\nimport GPUSkinningBetterList from \"./GPUSkinningBetterList\";\nimport GPUSkinningMaterial from \"./GPUSkinningMaterial\";\nimport GPUSkinningExecuteOncePerFrame from \"./GPUSkinningExecuteOncePerFrame\";\nimport GPUSkinningPlayer from \"./GPUSkinningPlayer\";\n\nimport Material = Laya.Material;\nimport Mesh = Laya.Mesh;\nimport Texture2D = Laya.Texture2D;\nimport BoundSphere = Laya.BoundSphere;\nimport Vector4 = Laya.Vector4;\nimport Vector3 = Laya.Vector3;\nimport Matrix4x4 = Laya.Matrix4x4;\nimport ShaderDefine = Laya.ShaderDefine;\nimport Shader3D = Laya.Shader3D;\n\nimport GPUSkinningClip from \"./Datas/GPUSkinningClip\";\nimport GPUSkinningFrame from \"./Datas/GPUSkinningFrame\";\nimport { MaterialState } from \"./MaterialState\";\nimport { GPUSkinningQuality } from \"./Datas/GPUSkinningQuality\";\n\n\n/** GPU骨骼动画--资源 */\nexport default class GPUSkinningPlayerResources\n{\n\n    /** 烘焙动画--全部数据信息 */\n    public anim: GPUSkinningAnimation  = null;\n\n    /** 网格 */\n    public mesh: Mesh  = null;\n\n    /** 烘焙动画--贴图数据 */\n    public texture: Texture2D;\n\n    /** 动画播放控制器列表 */\n    public players: GPUSkinningPlayerMono[] = [];\n\n    /** 裁剪组 */\n    private cullingGroup:any = null;\n\n    /** 裁剪列表 <球形包围盒> */\n    private cullingBounds: GPUSkinningBetterList<BoundSphere> = new GPUSkinningBetterList<BoundSphere>(100);\n\n    /** 材质球列表 */\n    private mtrls: GPUSkinningMaterial[]  = null;\n\n    /** 一帧只执行一次标记 */\n    private executeOncePerFrame:GPUSkinningExecuteOncePerFrame  = new GPUSkinningExecuteOncePerFrame();\n\n\n\n\n    private time: float = 0;\n    public get Time():float\n    {\n        return this.time;\n    }\n\n    public set Time(value: float)\n    {\n        this.time = value;\n    }\n\n    private static keywords: string[]  = [\n        \"ROOTON_BLENDOFF\", \"ROOTON_BLENDON_CROSSFADEROOTON\", \"ROOTON_BLENDON_CROSSFADEROOTOFF\",\n        \"ROOTOFF_BLENDOFF\", \"ROOTOFF_BLENDON_CROSSFADEROOTON\", \"ROOTOFF_BLENDON_CROSSFADEROOTOFF\" \n    ];\n\n    \n    private static keywordDefines: Laya.ShaderDefine[]  = [];\n    private static ShaderDefine_SKIN_1: Laya.ShaderDefine;\n    private static ShaderDefine_SKIN_2: Laya.ShaderDefine;\n    private static ShaderDefine_SKIN_4: Laya.ShaderDefine;\n    \n\n    private static  shaderPropID_GPUSkinning_TextureMatrix : int= -1;\n\n    private static  shaderPropID_GPUSkinning_TextureSize_NumPixelsPerFrame : int= 0;\n\n    private static  shaderPorpID_GPUSkinning_FrameIndex_PixelSegmentation : int= 0;\n\n    private static  shaderPropID_GPUSkinning_RootMotion : int= 0;\n\n    private static  shaderPorpID_GPUSkinning_FrameIndex_PixelSegmentation_Blend_CrossFade : int= 0;\n\n    private static  shaderPropID_GPUSkinning_RootMotion_CrossFade : int= 0;\n\n    private static _isInited: boolean = false;\n    static Init()\n    {\n        if(this._isInited)\n            return;\n\n        this._isInited = true;\n\n        for(let key of this.keywords)\n        {\n            this.keywordDefines.push(Shader3D.getDefineByName(key));\n        }\n\n        this.ShaderDefine_SKIN_1 = Shader3D.getDefineByName(\"SKIN_1\");\n        this.ShaderDefine_SKIN_2 = Shader3D.getDefineByName(\"SKIN_2\");\n        this.ShaderDefine_SKIN_4 = Shader3D.getDefineByName(\"SKIN_4\");\n\n        this.shaderPropID_GPUSkinning_TextureMatrix = Shader3D.propertyNameToID(\"u_GPUSkinning_TextureMatrix\");\n\n        this.shaderPropID_GPUSkinning_TextureSize_NumPixelsPerFrame = Shader3D.propertyNameToID(\"u_GPUSkinning_TextureSize_NumPixelsPerFrame\");\n        this.shaderPorpID_GPUSkinning_FrameIndex_PixelSegmentation = Shader3D.propertyNameToID(\"u_GPUSkinning_FrameIndex_PixelSegmentation\");\n        this.shaderPropID_GPUSkinning_RootMotion = Shader3D.propertyNameToID(\"u_GPUSkinning_RootMotion\");\n        this.shaderPorpID_GPUSkinning_FrameIndex_PixelSegmentation_Blend_CrossFade = Shader3D.propertyNameToID(\"u_GPUSkinning_FrameIndex_PixelSegmentation_Blend_CrossFade\");\n        this.shaderPropID_GPUSkinning_RootMotion_CrossFade = Shader3D.propertyNameToID(\"u_GPUSkinning_RootMotion_CrossFade\");\n\n\n    }\n\n    constructor()\n    {\n        GPUSkinningPlayerResources.Init();\n    }\n\n    /** 销毁 */\n    public Destroy()\n    {\n        this.anim = null;\n        this.mesh = null;\n\n\n        if(this.mtrls != null)\n        {\n            for(let i = 0; i < this.mtrls.length; i ++)\n            {\n                this.mtrls[i].Destroy();\n                this.mtrls[i] = null;\n            }\n            this.mtrls = null;\n        }\n\n        if(this.texture != null)\n        {\n            this.texture.destroy();\n            this.texture = null;\n        }\n\n        if(this.players != null)\n        {\n            this.players.length = 0;\n            this.players = null;\n        }\n\n    }\n\n    /** 添加包围盒 */\n    public AddCullingBounds()\n    {\n        this.cullingBounds.Add(new BoundSphere(new Vector3(0, 0, 0), 0));\n    }\n\n    /** 移除包围盒 */\n    public RemoveCullingBounds(index: int )\n    {\n        this.cullingBounds.RemoveAt(index);\n\n    }\n\n    /** 动画播放控制器LOD改变 */\n    public LODSettingChanged(player: GPUSkinningPlayer )\n    {\n        if(player.LODEnabled)\n        {\n            let players = this.players;\n            let numPlayers = players.length;\n            for(let i = 0; i < numPlayers; i ++)\n            {\n                if(players[i].Player == player)\n                {\n                    let distanceIndex = 0;\n                    this.SetLODMeshByDistanceIndex(distanceIndex, players[i].Player);\n                    break;\n                }\n\n            }\n        }\n        else\n        {\n            player.SetLODMesh(null);\n        }\n    }\n\n\n    /** 根据距离设置LOD */\n    private SetLODMeshByDistanceIndex(index: int , player: GPUSkinningPlayer )\n    {\n        let lodMesh: Mesh  = null;\n        if (index == 0)\n        {\n            lodMesh = this.mesh;\n        }\n        else\n        {\n            let lodMeshes: Mesh[]  = this.anim.lodMeshes;\n            lodMesh = lodMeshes == null || lodMeshes.length == 0 ? this.mesh : lodMeshes[Math.min(index - 1, lodMeshes.length - 1)];\n            if (lodMesh == null) lodMesh = this.mesh;\n        }\n        player.SetLODMesh(lodMesh);\n    }\n\n\n    /** 更新裁剪 包围盒 */\n    private UpdateCullingBounds()\n    {\n        let numPlayers = this.players.length;\n        for (let i = 0; i < numPlayers; ++i)\n        {\n            let player: GPUSkinningPlayerMono  = this.players[i];\n            let bounds: BoundSphere  = this.cullingBounds.Get(i);\n            bounds.center = player.Player.Position;\n            bounds.radius = this.anim.sphereRadius;\n            this.cullingBounds[i] = bounds;\n        }\n    }\n\n    /** 帧更新 */\n    public Update(deltaTime: float , mtrl: GPUSkinningMaterial )\n    {\n        if (this.executeOncePerFrame.CanBeExecute())\n        {\n            this.executeOncePerFrame.MarkAsExecuted();\n            this.time += deltaTime;\n            this.UpdateCullingBounds();\n        }\n\n        if (mtrl.executeOncePerFrame.CanBeExecute())\n        {\n            let anim = this.anim;\n            mtrl.executeOncePerFrame.MarkAsExecuted();\n            mtrl.material._shaderValues.setTexture(GPUSkinningPlayerResources.shaderPropID_GPUSkinning_TextureMatrix, this.texture);\n            // console.log(\"textureWidth=\", anim.textureWidth, \"textureHeight=\", anim.textureWidth, \"anim.bonesCount * 3=\",anim.bonesCount* 3);\n        \n            mtrl.material._shaderValues.setVector(GPUSkinningPlayerResources.shaderPropID_GPUSkinning_TextureSize_NumPixelsPerFrame, \n                new Vector4(anim.textureWidth, anim.textureHeight, anim.bonesCount * 3 * 4/*treat 3 pixels as a float3x4*/, 0));\n        }\n    }\n\n\n\n    /** 更新数据 */\n    public UpdatePlayingData( mpb: Laya.ShaderData , playingClip: GPUSkinningClip , frameIndex: int , frame: GPUSkinningFrame , rootMotionEnabled: boolean ,\n        lastPlayedClip: GPUSkinningClip , frameIndex_crossFade: int , crossFadeTime: float , crossFadeProgress: float )\n    {\n        // console.log(playingClip.name,\"frameIndex=\", frameIndex, \"pixelSegmentation\", playingClip.pixelSegmentation);\n        mpb.setVector( GPUSkinningPlayerResources.shaderPorpID_GPUSkinning_FrameIndex_PixelSegmentation, new Vector4(frameIndex, playingClip.pixelSegmentation, 0, 0));\n\n        if (rootMotionEnabled)\n        {\n            let rootMotionInv: Matrix4x4  = frame.RootMotionInv(this.anim.rootBoneIndex);\n            mpb.setMatrix4x4(GPUSkinningPlayerResources.shaderPropID_GPUSkinning_RootMotion, rootMotionInv);\n        }\n\n        if (this.IsCrossFadeBlending(lastPlayedClip, crossFadeTime, crossFadeProgress))\n        {\n            if (lastPlayedClip.rootMotionEnabled)\n            {\n                mpb.setMatrix4x4(GPUSkinningPlayerResources.shaderPropID_GPUSkinning_RootMotion_CrossFade, \n                    lastPlayedClip.frames[frameIndex_crossFade].RootMotionInv(this.anim.rootBoneIndex));\n            }\n\n            mpb.setVector(GPUSkinningPlayerResources.shaderPorpID_GPUSkinning_FrameIndex_PixelSegmentation_Blend_CrossFade,\n                new Vector4(frameIndex_crossFade, lastPlayedClip.pixelSegmentation, this.CrossFadeBlendFactor(crossFadeProgress, crossFadeTime)));\n        }\n    }\n\n\n    /** 动画混合百分比 */\n    public CrossFadeBlendFactor(crossFadeProgress: float , crossFadeTime: float ):float\n    {\n        return Mathf.Clamp01(crossFadeProgress / crossFadeTime);\n    }\n\n    /** 是否是动画混合阶段 */\n    public IsCrossFadeBlending(lastPlayedClip: GPUSkinningClip , crossFadeTime: float , crossFadeProgress: float ): boolean\n    {\n        return lastPlayedClip != null && crossFadeTime > 0 && crossFadeProgress <= crossFadeTime;\n    }\n\n\n    /** 获取材质，根据状态 */\n    public GetMaterial(state: MaterialState ):GPUSkinningMaterial\n    {\n        return this.mtrls[state];\n    }\n\n    public InitMaterial(originalMaterial: Material, skinningQuality: GPUSkinningQuality)\n    {\n        if(this.mtrls != null)\n        {\n            return;\n        }\n\n        let SKILL_N:ShaderDefine;\n        switch(skinningQuality)\n        {\n            case GPUSkinningQuality.Bone1:\n                SKILL_N =  GPUSkinningPlayerResources.ShaderDefine_SKIN_1;\n                break;\n            case GPUSkinningQuality.Bone2:\n                SKILL_N =  GPUSkinningPlayerResources.ShaderDefine_SKIN_2;\n                break;\n            case GPUSkinningQuality.Bone4:\n                SKILL_N =  GPUSkinningPlayerResources.ShaderDefine_SKIN_4;\n                break;\n        }\n\n        let mtrls = this.mtrls = [];\n\n        for (let i = 0; i < MaterialState.Count; ++i)\n        {\n            let materialItem = new GPUSkinningMaterial();\n            let material =  materialItem.material = <Material> originalMaterial.clone();\n\n            mtrls[i] = materialItem;\n            \n            material.name = GPUSkinningPlayerResources.keywords[i];\n           \n            material._shaderValues.addDefine(SKILL_N);\n\n\n            // TODO 还未实现\n            // material.enableInstancing = true; // enable instancing in Unity 5.6\n            this.EnableKeywords(i, materialItem);\n\n        }\n    }\n\n    private EnableKeywords(ki: int , mtrl: GPUSkinningMaterial )\n    {\n        for(let i = 0; i < this.mtrls.length; ++i)\n        {\n            if(i == ki)\n            {\n                mtrl.material._shaderValues.addDefine(GPUSkinningPlayerResources.keywordDefines[i]);\n            }\n            else\n            {\n                mtrl.material._shaderValues.removeDefine(GPUSkinningPlayerResources.keywordDefines[i]);\n            }\n        }\n    }\n\n\n\n\n\n\n}","import GPUSkinningPlayerResources from \"./GPUSkinningPlayerResources\";\nimport GPUSkinningAnimation from \"./Datas/GPUSkinningAnimation\";\n\n\nimport Material = Laya.Material;\nimport Mesh = Laya.Mesh;\nimport Texture2D = Laya.Texture2D;\nimport GPUSkinningPlayerMono from \"./GPUSkinningPlayerMono\";\n\n/** GPU骨骼动画--播放管理器 */\nexport default class GPUSkinningPlayerMonoManager\n{\n    /** GPU骨骼动画--资源 列表 */\n    private items:GPUSkinningPlayerResources[] = [];\n\n    /** 注册 */\n    public Register(anim: GPUSkinningAnimation , mesh: Mesh , originalMtrl:Material , textureRawData: Texture2D , player: GPUSkinningPlayerMono  )\n    {\n\n        if (anim == null || originalMtrl == null || textureRawData == null || player == null)\n        {\n            return;\n        }\n\n        let item: GPUSkinningPlayerResources  = null;\n\n        let items = this.items;\n        let numItems = items.length;\n        for(let i = 0; i < numItems; ++i)\n        {\n            if(items[i].anim.guid == anim.guid)\n            {\n                item = items[i];\n                break;\n            }\n        }\n\n        if(item == null)\n        {\n            item = new GPUSkinningPlayerResources();\n            items.push(item);\n        }\n\n        if(item.anim == null)\n        {\n            item.anim = anim;\n        }\n\n        if(item.mesh == null)\n        {\n            item.mesh = mesh;\n        }\n\n        item.InitMaterial(originalMtrl, anim.skinQuality);\n\n        if(item.texture == null)\n        {\n            item.texture = textureRawData;\n        }\n\n        if (item.players.indexOf(player) == -1)\n        {\n            item.players.push(player);\n            item.AddCullingBounds();\n        }\n\n        return item;\n    }\n\n    /** 注销 */\n    public Unregister(player: GPUSkinningPlayerMono )\n    {\n        if(player == null)\n        {\n            return;\n        }\n\n        let items = this.items;\n        let numItems = items.length;\n        for(let i = 0; i < numItems; ++i)\n        {\n            let playerIndex = items[i].players.indexOf(player);\n            if(playerIndex != -1)\n            {\n                items[i].players.splice(playerIndex, 1);\n                items[i].RemoveCullingBounds(playerIndex);\n                if(items[i].players.length == 0)\n                {\n                    items[i].Destroy();\n                    items.splice(i, 1)\n                }\n                break;\n            }\n        }\n    } \n}","\nexport default class GPUSkinningPlayerJoint extends Laya.Script3D\n{\n\n    BoneIndex:int = 0;\n    BoneGUID: string = null;\n\n    private go: Laya.Sprite3D;\n    private transform: Laya.Transform3D;\n\n\n\n    public get Transform(): Laya.Transform3D\n    {\n        return this.transform;\n    }\n\n    public get GameObject(): Laya.Sprite3D\n    {\n        return this.go;\n    }\n\n\n    onAwake()\n    {\n        this.go = <Laya.Sprite3D> this.owner;\n        this.transform = this.go.transform;\n    }\n\n    Init(boneIndex: int, boneGUID: string)\n    {\n        this.BoneIndex = boneIndex;\n        this.BoneGUID = boneGUID;\n    }\n}","export enum GPUSkinningWrapMode\n{\n    /** 播放一次 */\n    Once,\n    /** 循环播放 */\n    Loop\n}","import GPUSkinningPlayerResources from \"./GPUSkinningPlayerResources\";\nimport GPUSkinningClip from \"./Datas/GPUSkinningClip\";\nimport { GPUSKinningCullingMode } from \"./GPUSKinningCullingMode\";\nimport GPUSkinningPlayerJoint from \"./GPUSkinningPlayerJoint\";\nimport { GPUSkinningWrapMode } from \"./Datas/GPUSkinningWrapMode\";\nimport GPUSkinningMaterial from \"./GPUSkinningMaterial\";\nimport LayaUtil from \"../LayaExtends/LayaUtil\";\nimport GPUSkinningBone from \"./Datas/GPUSkinningBone\";\nimport { MaterialState } from \"./MaterialState\";\nimport GPUSkinningFrame from \"./Datas/GPUSkinningFrame\";\n\nimport MeshRenderer = Laya.MeshRenderer;\nimport MeshFilter = Laya.MeshFilter;\nimport Vector3 = Laya.Vector3;\nimport Mesh = Laya.Mesh;\nimport Matrix4x4 = Laya.Matrix4x4;\nimport Quaternion = Laya.Quaternion;\nimport Transform3D = Laya.Transform3D;\nimport GPUSkinningAnimEvent from \"./Datas/GPUSkinningAnimEvent\";\n\n/** GPU骨骼动画--组件播放控制器 */\nexport default class GPUSkinningPlayer\n{\n    private go: Laya.MeshSprite3D;\n    private transform: Laya.Transform3D;\n    private mr: MeshRenderer;\n    private mf: MeshFilter;\n\n    private time: float = 0;\n    private timeDiff: float = 0;\n    private crossFadeTime: float = -1;\n    private crossFadeProgress: float = 0;\n    private lastPlayedTime: float = 0;\n    private lastPlayedClip:GPUSkinningClip = null;\n    private lastPlayingFrameIndex: int = -1;\n    private lastPlayingClip: GPUSkinningClip = null;\n    private playingClip: GPUSkinningClip = null;\n    private res: GPUSkinningPlayerResources = null;\n    private rootMotionFrameIndex:int = -1;\n\n    /** 动画事件 */\n    sAnimEvent:Typed2Signal<GPUSkinningPlayer, int> = new Typed2Signal<GPUSkinningPlayer, int>();\n\n    /** 根节点是否驱动位移 */\n    private rootMotionEnabled: boolean = false;\n    public get RootMotionEnabled(): boolean\n    {\n        return this.rootMotionEnabled;\n    }\n\n    public set RootMotionEnabled(value: boolean)\n    {\n        this.rootMotionFrameIndex = -1;\n        this.rootMotionEnabled = value;\n    }\n\n\n    /** 裁剪模式 */\n    private cullingMode: GPUSKinningCullingMode = GPUSKinningCullingMode.CullUpdateTransforms;\n    public get CullingMode():GPUSKinningCullingMode\n    {\n        return this.cullingMode;\n    }\n\n    public set CullingMode(value: GPUSKinningCullingMode)\n    {\n        this.cullingMode = value;\n    }\n\n    /** 是否显示 */\n    private visible: boolean = true;\n    public get Visible(): boolean\n    {\n        return this.visible;\n    }\n\n    public set Visible(value: boolean)\n    {\n        this.visible = value;\n    }\n\n    /** LOD 模式是否开启 */\n    private lodEnabled: boolean = false;\n    public get LODEnabled()\n    {\n        return this.lodEnabled;\n    }\n\n    public set LODEnabled(value: boolean)\n    {\n        this.lodEnabled = value;\n        this.res.LODSettingChanged(this);\n    }\n\n    /** 是否播放 */\n    private isPlaying: boolean = false;\n    public get IsPlaying(): boolean\n    {\n        return this.isPlaying;\n    }\n\n    /** 当前播放的动画剪辑名称 */\n    public get PlayingClipName():string\n    {\n        return this.playingClip == null ? null : this.playingClip.name;\n    }\n\n    /** 世界坐标 */\n    public get Position():Vector3\n    {\n        return this.transform == null ? new Vector3() : this.transform.position;\n    }\n\n    /** 局部坐标 */\n    public get LocalPosition():Vector3\n    {\n        return this.transform == null ? new Vector3() : this.transform.localPosition;\n    }\n\n    /** 骨骼列表 */\n    private joints: GPUSkinningPlayerJoint[]  = null;\n    public get Joints(): GPUSkinningPlayerJoint[]\n    {\n        return this.joints;\n    }\n\n    /** 播放模式，单次或者循环 */\n    public get WrapMode(): GPUSkinningWrapMode\n    {\n        return this.playingClip == null ? GPUSkinningWrapMode.Once : this.playingClip.wrapMode;\n    }\n\n    /** 动画剪辑时间长度 */\n    public get ClipTimeLength(): float\n    {\n        if(!this.playingClip)\n        {\n            return 0;\n        }\n        \n        return this.playingClip.length;\n    }\n\n    /** 是否是动作结束帧 */\n    public get IsTimeAtTheEndOfLoop(): boolean\n    {\n        if(this.playingClip == null)\n        {\n            return false;\n        }\n        else\n        {\n            return this.GetFrameIndex() == (Math.floor(this.playingClip.length * this.playingClip.fps) - 1);\n        }\n\n    }\n\n    /** 播放进度百分比 */\n    public get NormalizedTime(): float\n    {\n        if(this.playingClip == null)\n        {\n            return 0;\n        }\n        else\n        {\n            return this.GetFrameIndex() / (Math.floor(this.playingClip.length * this.playingClip.fps) - 1);\n        }\n    }\n\n    public set NormalizedTime(value: float)\n    {\n        if(this.playingClip != null)\n        {\n            var v = Mathf.Clamp01(value);\n            \n            if(this.WrapMode == GPUSkinningWrapMode.Once)\n            {\n                this.time = v * this.playingClip.length;\n            }\n            else if(this.WrapMode == GPUSkinningWrapMode.Loop)\n            {\n                if(this.playingClip.individualDifferenceEnabled)\n                {\n                    this.res.Time = this.playingClip.length + v * this.playingClip.length - this.timeDiff;\n                }\n                else\n                {\n                    this.res.Time = v * this.playingClip.length;\n                }\n            }\n            else\n            {\n                console.error(`GPUSkinningPlayer.NormalizedTime 未知 播放模式 WrapMode=${this.WrapMode}`);\n            }\n        }\n    }\n\n    /** 获取当前时间 */\n    private GetCurrentTime(): float\n    {\n        let time = 0;\n        switch(this.WrapMode)\n        {\n            case GPUSkinningWrapMode.Once:\n                time = this.time;\n                break;\n            case GPUSkinningWrapMode.Loop:\n                time = this.res.Time + (this.playingClip.individualDifferenceEnabled ? this.timeDiff : 0);\n                break;\n            default:\n                console.error(`GPUSkinningPlayer.GetCurrentTime 未知 播放模式 WrapMode=${this.WrapMode}`);\n                break;\n        }\n\n        return time;\n    }\n\n\n    /** 获取当前帧 */\n    private GetFrameIndex(): int\n    {\n        let time = this.GetCurrentTime();\n        if(this.playingClip.length == time)\n        {\n            return this.GetTheLastFrameIndex_WrapMode_Once(this.playingClip);\n        }\n        else\n        {\n            return this.GetFrameIndex_WrapMode_Loop(this.playingClip, time);\n        }\n    }\n\n    /** 获取动画过度帧 */\n    private GetCrossFadeFrameIndex(): int\n    {\n        if(this.lastPlayedClip == null)\n        {\n            return 0;\n        }\n\n        switch(this.lastPlayedClip.wrapMode)\n        {\n            case GPUSkinningWrapMode.Once:\n                if(this.lastPlayedTime >= this.lastPlayedClip.length)\n                {\n                    return this.GetTheLastFrameIndex_WrapMode_Once(this.lastPlayedClip);\n                }\n                else\n                {\n                    return this.GetFrameIndex_WrapMode_Loop(this.lastPlayedClip, this.lastPlayedTime);\n                }\n                break;\n\n            case GPUSkinningWrapMode.Loop:\n                return this.GetFrameIndex_WrapMode_Loop(this.lastPlayedClip, this.lastPlayedTime);\n                break;\n\n            default:\n                console.error(`GPUSkinningPlayer.GetCrossFadeFrameIndex 未知 播放模式 this.lastPlayedClip.wrapMode=${this.lastPlayedClip.wrapMode}`);\n                break;\n        }\n\n    }\n\n\n    /** 获取动画剪辑最后一帧索引 */\n    private GetTheLastFrameIndex_WrapMode_Once(clip: GPUSkinningClip ):int\n    {\n        return Math.floor(clip.length * clip.fps) - 1;\n    }\n\n    /** 获取动画剪辑帧索引 */\n    private  GetFrameIndex_WrapMode_Loop(clip: GPUSkinningClip , time: float ):int\n    {\n        return Math.floor(time * clip.fps) % Math.floor(clip.length * clip.fps);\n    }\n\n    /** 获取当前材质 */\n    private GetCurrentMaterial():GPUSkinningMaterial\n    {\n        if(this.res == null)\n        {\n            return null;\n        }\n\n        if(this.playingClip == null)\n        {\n            return this.res.GetMaterial(MaterialState.RootOff_BlendOff);\n        }\n\n        let res = this.res;\n        let playingClip = this.playingClip;\n        let lastPlayedClip = this.lastPlayedClip;\n        let rootMotionEnabled = this.rootMotionEnabled;\n        let crossFadeTime = this.crossFadeTime;\n        let crossFadeProgress = this.crossFadeProgress;\n\n        if(playingClip.rootMotionEnabled && rootMotionEnabled)\n        {\n            if(res.IsCrossFadeBlending(lastPlayedClip, crossFadeTime, crossFadeProgress))\n            {\n                if(lastPlayedClip.rootMotionEnabled)\n                {\n                    return res.GetMaterial(MaterialState.RootOn_BlendOn_CrossFadeRootOn);\n                }\n                return res.GetMaterial(MaterialState.RootOn_BlendOn_CrossFadeRootOff);\n            }\n            return res.GetMaterial(MaterialState.RootOn_BlendOff);\n        }\n\n        if(res.IsCrossFadeBlending(lastPlayedClip, crossFadeTime, crossFadeProgress))\n        {\n            if(lastPlayedClip.rootMotionEnabled)\n            {\n                return res.GetMaterial(MaterialState.RootOff_BlendOn_CrossFadeRootOn);\n            }\n            return res.GetMaterial(MaterialState.RootOff_BlendOn_CrossFadeRootOff);\n        }\n        else\n        {\n            return res.GetMaterial(MaterialState.RootOff_BlendOff);\n        }\n\n    }\n\n\n    /** 设置LOD网格 */\n    public SetLODMesh(mesh: Mesh )\n    {\n        if(!this.LODEnabled)\n        {\n            mesh = this.res.mesh;\n        }\n\n        if(this.mf != null && this.mf.sharedMesh != mesh)\n        {\n            this.mf.sharedMesh = mesh;\n        }\n    }\n\n\n\n    constructor(go: Laya.MeshSprite3D, res: GPUSkinningPlayerResources)\n    {\n        this.go = go;\n        this.transform = go.transform;\n        this.res = res;\n\n        this.mr = go.meshRenderer;\n        this.mf = go.meshFilter;\n\n        let mtrl: GPUSkinningMaterial = this.GetCurrentMaterial();\n        this.mr.sharedMaterial = mtrl == null ? null : mtrl.material;\n        this.mf.sharedMesh = res.mesh;\n\n\n        this.ConstructJoints();\n    }\n\n    /** 构建骨骼节点 */\n    private ConstructJoints()\n    {\n        if(this.joints)\n            return;\n\n\n        \n        let existingJoints: GPUSkinningPlayerJoint[] = this.go.getComponentsInChildren<GPUSkinningPlayerJoint>(GPUSkinningPlayerJoint);\n\n        let bones: GPUSkinningBone[] = this.res.anim.bones;\n        let numBones = bones == null ? 0 : bones.length;\n        for(let i = 0; i < numBones; i ++)\n        {\n            let bone = bones[i];\n            if(!bone.isExposed)\n            {\n                continue;\n            }\n\n            if(this.joints == null)\n            {\n                this.joints = [];\n            }\n\n            let joints =  this.joints;\n\n            // 是否从已经存在的骨骼节点设置了\n            let inTheExistingJoints: boolean = false;\n\n            if(existingJoints != null)\n            {\n                for(let j = 0; j < existingJoints.length; j ++)\n                {\n                    let existingJoint = existingJoints[j];\n                    if(existingJoint && existingJoint.BoneGUID == bone.guid)\n                    {\n                        if(existingJoint.BoneIndex != i)\n                        {\n                            existingJoint.Init(i, bone.guid);\n                        }\n\n                        joints.push(existingJoint);\n                        existingJoints[j] = null; \n                        inTheExistingJoints = true;\n                        break;\n                    }\n                }\n            }\n\n            if(!inTheExistingJoints)\n            {\n                let joinGO = new Laya.Sprite3D(bone.name);\n                this.go.addChild(joinGO);\n                joinGO.transform.localPosition = new Vector3();\n                joinGO.transform.localScale = new Vector3(1, 1, 1);\n\n                let join:GPUSkinningPlayerJoint = joinGO.addComponent(GPUSkinningPlayerJoint);\n                joints.push(join);\n                join.Init(i, bone.guid);\n            }\n        }\n\n        // 清除没用到已经存在的骨骼节点\n        this.DeleteInvalidJoints(existingJoints);\n\n    }\n\n\n    /** 清除没用到已经存在的骨骼节点 */\n    private DeleteInvalidJoints(joints: GPUSkinningPlayerJoint[] )\n    {\n        if(joints)\n        {\n            for(let i = 0; i < joints.length; i ++)\n            {\n                let join = joints[i];\n                let joinGO = <Laya.Sprite3D> join.owner;\n                for(let j = joinGO.numChildren; j >= 0 ; j --)\n                {\n                    let child =  <Laya.Sprite3D> joinGO.getChildAt(j);\n                    this.go.addChild(child);\n                    child.transform.localPosition = new Vector3();\n                }\n\n                joinGO.removeSelf();\n                joinGO.destroy();\n\n            }\n        }\n    }\n\n    /** 播放 */\n    public Play(clipName:string)\n    {\n        let clips: GPUSkinningClip[] = this.res.anim.clips;\n        let numClips = clips == null ? 0 : clips.length;\n\n        let playingClip = this.playingClip;\n        for(let i = 0; i < numClips; ++i)\n        {\n            if(clips[i].name == clipName)\n            {\n                let item = clips[i];\n                if(playingClip != item\n                    || (playingClip != null && playingClip.wrapMode == GPUSkinningWrapMode.Once && this.IsTimeAtTheEndOfLoop)\n                    || (playingClip != null && !this.isPlaying)\n                )\n                {\n                    this.SetNewPlayingClip(item);\n                }\n                return;\n            }\n        }\n    }\n\n    /** 播放动作融合 */\n    public CrossFade(clipName: string, fadeLength: float)\n    {\n        if(this.playingClip == null)\n        {\n            this.Play(clipName);\n        }\n        else\n        {\n            let playingClip = this.playingClip;\n\n            let clips: GPUSkinningClip[] = this.res.anim.clips;\n            let numClips = clips == null ? 0 : clips.length;\n            for(let i = 0; i < numClips; ++i)\n            {\n                if(clips[i].name == clipName)\n                {\n                    let item = clips[i];\n\n                    if(playingClip != item)\n                    {\n                        this.crossFadeProgress = 0;\n                        this.crossFadeTime = fadeLength;\n                        this.SetNewPlayingClip(item);\n                        return;\n                    }\n\n                    if(\n                        (playingClip != null && playingClip.wrapMode == GPUSkinningWrapMode.Once && this.IsTimeAtTheEndOfLoop)\n                        || (playingClip != null && !this.isPlaying)\n                    )\n                    {\n                        this.SetNewPlayingClip(item);\n                        return;\n                    }\n                }\n            }\n\n        }\n\n\n    }\n\n\n    /** 设置新播放的剪辑 */\n    private SetNewPlayingClip(clip: GPUSkinningClip)\n    {\n        this.lastPlayedClip = this.playingClip;\n        this.lastPlayedTime = this.GetCurrentTime();\n\n        this.isPlaying = true;\n        this.playingClip = clip;\n        this.rootMotionFrameIndex = -1;\n        this.time = 0;\n        this.timeDiff = Random.range(0, clip.length);\n    }\n\n\n    /** 暂停 */\n    public Stop()\n    {\n        this.isPlaying = false;\n    }\n\n    /** 继续播放 */\n    public Resume()\n    {\n        if(this.playingClip != null)\n        {\n            this.isPlaying = true;\n        }\n    }\n\n    /** 刷新入口 每帧调用 */\n    public Update(timeDelta: float)\n    {\n        if(!this.isPlaying || this.playingClip == null)\n        {\n            return;\n        }\n\n        let currMtrl = this.GetCurrentMaterial();\n        if(currMtrl == null)\n        {\n            return;\n        }\n\n        if(this.mr.sharedMaterial != currMtrl.material)\n        {\n            this.mr.sharedMaterial = currMtrl.material;\n        }\n\n        let playingClip = this.playingClip;\n\n        switch(playingClip.wrapMode)\n        {\n            case GPUSkinningWrapMode.Loop:\n                this.UpdateMaterial(timeDelta, currMtrl);\n                break;\n\n            case GPUSkinningWrapMode.Once:\n                if(this.time >= playingClip.length)\n                {\n                    this.time = playingClip.length;\n                    this.UpdateMaterial(timeDelta, currMtrl);\n                }\n                else\n                {\n                    this.UpdateMaterial(timeDelta, currMtrl);\n                    this.time += timeDelta;\n                    if(this.time > playingClip.length)\n                    {\n                        this.time = playingClip.length;\n                    }\n                }\n                break;\n            default:\n                console.error(`GPUSkinningPlayer.Update 未知 播放模式 playingClip.wrapMode=${playingClip.wrapMode}`);\n                break;\n\n        }\n\n        this.crossFadeProgress += timeDelta;\n        this.lastPlayedTime += timeDelta;\n\n    }\n\n\n    private UpdateMaterial(deltaTime: float , currMtrl: GPUSkinningMaterial )\n    {\n        let res = this.res;\n        let frameIndex = this.GetFrameIndex();\n        if(this.lastPlayingClip == this.playingClip && this.lastPlayingFrameIndex == frameIndex)\n        {\n            res.Update(deltaTime, currMtrl);\n            return;\n        }\n\n        this.lastPlayingClip = this.playingClip;\n        this.lastPlayingFrameIndex = frameIndex;\n\n        let lastPlayedClip = this.lastPlayingClip;\n        let playingClip = this.playingClip;\n\n        let blend_crossFade:float = 1;\n        let frameIndex_crossFade:int = -1;\n        let frame_crossFade: GPUSkinningFrame  = null;\n        if (res.IsCrossFadeBlending(lastPlayedClip, this.crossFadeTime, this.crossFadeProgress))\n        {\n            frameIndex_crossFade = this.GetCrossFadeFrameIndex();\n            frame_crossFade = lastPlayedClip.frames[frameIndex_crossFade];\n            blend_crossFade = res.CrossFadeBlendFactor(this.crossFadeProgress, this.crossFadeTime);\n        }\n\n        var mpb = currMtrl.material._shaderValues;\n\n        let frame: GPUSkinningFrame = playingClip.frames[frameIndex];\n        if (this.Visible || \n            this.CullingMode == GPUSKinningCullingMode.AlwaysAnimate)\n        {\n            res.Update(deltaTime, currMtrl);\n            res.UpdatePlayingData(\n                mpb, playingClip, frameIndex, frame, playingClip.rootMotionEnabled && this.rootMotionEnabled,\n                lastPlayedClip, this.GetCrossFadeFrameIndex(), this.crossFadeTime, this.crossFadeProgress\n            );\n\n            // this.mr.SetPropertyBlock(mpb);\n            this.UpdateJoints(frame);\n        }\n\n        if (playingClip.rootMotionEnabled && this.rootMotionEnabled && frameIndex != this.rootMotionFrameIndex)\n        {\n            if (this.CullingMode != GPUSKinningCullingMode.CullCompletely)\n            {\n                this.rootMotionFrameIndex = frameIndex;\n                this.DoRootMotion(frame_crossFade, 1 - blend_crossFade, false);\n                this.DoRootMotion(frame, blend_crossFade, true);\n            }\n        }\n\n        this.UpdateEvents(playingClip, frameIndex, frame_crossFade == null ? null : lastPlayedClip, frameIndex_crossFade);\n    }\n\n\n    /** 刷新骨骼节点位置 */\n    private UpdateJoints(frame: GPUSkinningFrame )\n    {\n        if(this.joints == null)\n        {\n            return;\n        }\n\n        let res = this.res;\n        let joints = this.joints;\n        let playingClip = this.playingClip;\n\n        let matrices: Matrix4x4[]  = frame.matrices;\n        let bones: GPUSkinningBone[]  = res.anim.bones;\n        let numJoints:int  = joints.length;\n        for(let i = 0; i < numJoints; ++i)\n        {\n            let joint: GPUSkinningPlayerJoint  = joints[i];\n            let jointTransform: Transform3D  = joint.Transform;\n            if (jointTransform != null)\n            {\n                // TODO: Update Joint when Animation Blend\n\n                let jointMatrix: Matrix4x4 = new Matrix4x4();\n                Matrix4x4.multiply(frame.matrices[joint.BoneIndex], bones[joint.BoneIndex].BindposeInv, jointMatrix);\n                if(playingClip.rootMotionEnabled && this.rootMotionEnabled)\n                {\n                    let outM: Matrix4x4 = new Matrix4x4();\n                    Matrix4x4.multiply( frame.RootMotionInv(res.anim.rootBoneIndex), jointMatrix, outM);\n                    jointMatrix = outM;\n                }\n\n                var vec3 = new Vector3();\n                jointMatrix.getTranslationVector(vec3);\n                jointTransform.localPosition = vec3;\n\n                vec3 = new Vector3();\n\n                jointMatrix.getForward(vec3);\n\n                var vec3_2 = new Vector3();\n                Quaternion.angleTo(new Vector3(1, 0, 0), vec3, vec3_2);\n\n                jointTransform.localRotationEuler = vec3_2;\n            }\n            else\n            {\n                joints.splice(i, 1);\n                --i;\n                --numJoints;\n            }\n        }\n    }\n\n\n    /** 设置根节点位置和旋转 */\n    private DoRootMotion(frame: GPUSkinningFrame , blend: float , doRotate: boolean )\n    {\n        // TODO 占时没实现\n        // if(frame == null)\n        // {\n        //     return;\n        // }\n\n        // Quaternion deltaRotation = frame.rootMotionDeltaPositionQ;\n        // Vector3 newForward = deltaRotation * transform.forward;\n        // Vector3 deltaPosition = newForward * frame.rootMotionDeltaPositionL * blend;\n        // transform.Translate(deltaPosition, Space.World);\n\n        // if (doRotate)\n        // {\n        //     transform.rotation *= frame.rootMotionDeltaRotation;\n        // }\n    }\n\n\n    /** 刷新事件 */\n    private UpdateEvents(playingClip: GPUSkinningClip , playingFrameIndex:int , corssFadeClip: GPUSkinningClip , crossFadeFrameIndex:int )\n    {\n        this.UpdateClipEvent(playingClip, playingFrameIndex);\n        this.UpdateClipEvent(corssFadeClip, crossFadeFrameIndex);\n    }\n\n\n    /** 刷新剪辑事件 */\n    private UpdateClipEvent(clip: GPUSkinningClip , frameIndex:int )\n    {\n        if(clip == null || clip.events == null || clip.events.length == 0)\n        {\n            return;\n        }\n\n        let events: GPUSkinningAnimEvent[]  = clip.events;\n        let numEvents:int  = events.length;\n        for(let i = 0; i < numEvents; ++i)\n        {\n            if(events[i].frameIndex == frameIndex)\n            {\n                this.sAnimEvent.dispatch(this, events[i].eventId);\n                break;\n            }\n        }\n    }\n\n\n\n\n\n\n\n}","import GPUSkinningAnimation from \"./Datas/GPUSkinningAnimation\";\nimport { GPUSKinningCullingMode } from \"./GPUSKinningCullingMode\";\nimport GPUSkinningPlayerMonoManager from \"./GPUSkinningPlayerMonoManager\";\nimport GPUSkinningPlayer from \"./GPUSkinningPlayer\";\nimport Mesh = Laya.Mesh;\nimport Material = Laya.Material;\nimport Texture2D = Laya.Texture2D;\nimport GPUSkinningPlayerResources from \"./GPUSkinningPlayerResources\";\n\n\n/** GPU骨骼动画--组件 */\nexport default class GPUSkinningPlayerMono extends Laya.Script3D\n{\n    /** 烘焙动画--全部数据信息 */\n    anim: GPUSkinningAnimation;\n\n    /** 网格 */\n    mesh: Mesh;\n    \n    /** 材质 */\n    mtrl: Material;\n\n    /** 烘焙动画--贴图数据 */\n    textureRawData: Texture2D;\n\n    /** 默认播放动画剪辑 */\n    defaultPlayingClipIndex:int = 0;\n\n    /** 根节点是否驱动位移 */\n    rootMotionEnabled: boolean = false;\n\n    /** LOD 模式是否开启 */\n    lodEnabled: boolean = true;\n\n    /** 裁剪模式 */\n    cullingMode: GPUSKinningCullingMode = GPUSKinningCullingMode.CullUpdateTransforms;\n\n    /** 播放管理器 */\n    static playerManager: GPUSkinningPlayerMonoManager = new GPUSkinningPlayerMonoManager();\n\n    /** 播放控制器 */\n    private player: GPUSkinningPlayer;\n    public get Player(): GPUSkinningPlayer\n    {\n        return this.player;\n    }\n\n    gameObject: Laya.MeshSprite3D;\n    \n\n    onStart():void\n    {\n        this.Init();\n    }\n\n    \n    onUpdate():void\n    {\n        if(this.player != null)\n        {\n            this.player.Update(Laya.timer.delta / 1000 );\n        }\n    }\n\n    \n    onDestroy():void\n    {\n\n        this.anim = null;\n        this.mesh = null;\n        this.mtrl = null;\n        this.textureRawData = null;\n\n        GPUSkinningPlayerMono.playerManager.Unregister(this);\n    }\n\n    public SetData(anim: GPUSkinningAnimation, mesh: Mesh, mtrl: Material, textureRawData: Texture2D)\n    {\n        if(this.player != null)\n        {\n            return;\n        }\n\n        this.anim = anim;\n        this.mesh = mesh;\n        this.mtrl = mtrl;\n        this.textureRawData = textureRawData;\n        this.Init();\n    }\n\n    Init()\n    {\n        this.gameObject = <Laya.MeshSprite3D> this.owner;\n\n        if(this.player != null)\n        {\n            return;\n        }\n\n        \n        let anim = this.anim;\n        let mesh = this.mesh;\n        let mtrl = this.mtrl;\n        let textureRawData = this.textureRawData;\n\n        if(anim != null && mesh != null && mtrl != null && textureRawData != null)\n        {\n            let res: GPUSkinningPlayerResources = GPUSkinningPlayerMono.playerManager.Register(anim, mesh, mtrl, textureRawData, this);\n\n            let player = new GPUSkinningPlayer(this.gameObject, res);\n            player.RootMotionEnabled = this.rootMotionEnabled;\n            player.LODEnabled = this.lodEnabled;\n            player.CullingMode = this.cullingMode;\n            this.player = player;\n\n            if (anim != null && anim.clips != null && anim.clips.length > 0)\n            {\n                player.Play(anim.clips[Mathf.clamp(this.defaultPlayingClipIndex, 0, anim.clips.length)].name);\n            }\n\n\n        }\n    }\n\n}","import VertexMesh = Laya.VertexMesh;\nimport VertexDeclaration = Laya.VertexDeclaration;\nimport VertexElement = Laya.VertexElement;\nimport VertexElementFormat = Laya.VertexElementFormat;\n\n\nexport default class GPUSkiningVertexMesh extends VertexMesh\n{\n    \n\tstatic MESH_TEXTURECOORDINATE2: number = 6;\n\tprivate static _declarationMap: any = {};\n\n    /**\n\t * 获取顶点声明。\n\t * @param vertexFlag 顶点声明标记字符,格式为:\"POSITION,NORMAL,COLOR,UV,UV1,UV2,BLENDWEIGHT,BLENDINDICES,TANGENT\"。\n\t * @return 顶点声明。\n\t */\n\tstatic getVertexDeclaration(vertexFlag: string, compatible: boolean = true): VertexDeclaration {\n\t\tvar verDec: VertexDeclaration = this._declarationMap[vertexFlag + (compatible ? \"_0\" : \"_1\")];//TODO:兼容模式\n\t\tif (!verDec) {\n\t\t\tvar subFlags: any[] = vertexFlag.split(\",\");\n\t\t\tvar offset: number = 0;\n\t\t\tvar elements: any[] = [];\n\t\t\tfor (var i: number = 0, n: number = subFlags.length; i < n; i++) {\n\t\t\t\tvar element: VertexElement;\n\t\t\t\tswitch (subFlags[i]) {\n\t\t\t\t\tcase \"POSITION\":\n\t\t\t\t\t\telement = new VertexElement(offset, VertexElementFormat.Vector3, this.MESH_POSITION0);\n\t\t\t\t\t\toffset += 12;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"NORMAL\":\n\t\t\t\t\t\telement = new VertexElement(offset, VertexElementFormat.Vector3, this.MESH_NORMAL0);\n\t\t\t\t\t\toffset += 12;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"COLOR\":\n\t\t\t\t\t\telement = new VertexElement(offset, VertexElementFormat.Vector4, this.MESH_COLOR0);\n\t\t\t\t\t\toffset += 16;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"UV\":\n\t\t\t\t\t\telement = new VertexElement(offset, VertexElementFormat.Vector2, this.MESH_TEXTURECOORDINATE0);\n\t\t\t\t\t\toffset += 8;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"UV1\":\n\t\t\t\t\t\telement = new VertexElement(offset, VertexElementFormat.Vector4, this.MESH_TEXTURECOORDINATE1);\n\t\t\t\t\t\toffset += 16;\n\t\t\t\t\t\tbreak;\n                    case \"UV2\":\n                        element = new VertexElement(offset, VertexElementFormat.Vector4, this.MESH_TEXTURECOORDINATE2);\n\t\t\t\t\t\toffset += 16;\n\t\t\t\t\t\tconsole.log(\"UV2\", element)\n                        break;\n\t\t\t\t\tcase \"BLENDWEIGHT\":\n\t\t\t\t\t\telement = new VertexElement(offset, VertexElementFormat.Vector4, this.MESH_BLENDWEIGHT0);\n\t\t\t\t\t\toffset += 16;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"BLENDINDICES\":\n\t\t\t\t\t\tif (compatible) {\n\t\t\t\t\t\t\telement = new VertexElement(offset, VertexElementFormat.Vector4, this.MESH_BLENDINDICES0);//兼容\n\t\t\t\t\t\t\toffset += 16;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement = new VertexElement(offset, VertexElementFormat.Byte4, this.MESH_BLENDINDICES0);\n\t\t\t\t\t\t\toffset += 4;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"TANGENT\":\n\t\t\t\t\t\telement = new VertexElement(offset, VertexElementFormat.Vector4, this.MESH_TANGENT0);\n\t\t\t\t\t\toffset += 16;\n\t\t\t\t\t\tconsole.log(\"TANGENT\", element)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow \"VertexMesh: unknown vertex flag.\";\n\t\t\t\t}\n\t\t\t\telements.push(element);\n\t\t\t}\n\t\t\tverDec = new VertexDeclaration(offset, elements);\n\t\t\tthis._declarationMap[vertexFlag + (compatible ? \"_0\" : \"_1\")] = verDec;//TODO:兼容模式\n\t\t}\n\t\treturn verDec;\n\t}\n}","// import { IndexBuffer3D } from \"../graphics/IndexBuffer3D\"\n// import { VertexMesh } from \"../graphics/Vertex/VertexMesh\"\n// import { VertexBuffer3D } from \"../graphics/VertexBuffer3D\"\n// import { VertexDeclaration } from \"../graphics/VertexDeclaration\"\n// import { HalfFloatUtils } from \"../math/HalfFloatUtils\"\n// import { Matrix4x4 } from \"../math/Matrix4x4\"\n// import { Mesh } from \"../resource/models/Mesh\"\n// import { SubMesh } from \"../resource/models/SubMesh\"\n// import { Byte } from \"../../utils/Byte\"\n// import { LayaGL } from \"../../layagl/LayaGL\";\n// import { IndexFormat } from \"../graphics/IndexFormat\"\n\nimport IndexBuffer3D = Laya.IndexBuffer3D;\nimport VertexBuffer3D = Laya.VertexBuffer3D;\nimport VertexDeclaration = Laya.VertexDeclaration;\nimport HalfFloatUtils = Laya.HalfFloatUtils;\nimport Matrix4x4 = Laya.Matrix4x4;\nimport Mesh = Laya.Mesh;\nimport SubMesh = Laya.SubMesh;\nimport Byte = Laya.Byte;\nimport IndexFormat = Laya.IndexFormat;\nimport LayaGL = Laya.LayaGL;\nimport GPUSkiningVertexMesh from \"./GPUSkiningVertexMesh\";\n\n\n/**\n * @internal\n * <code>LoadModelV05</code> 类用于模型加载。\n */\nexport class GPUSkiningLoadModelV05 {\n\n\t/**@internal */\n\tprivate static _BLOCK: any = { count: 0 };\n\t/**@internal */\n\tprivate static _DATA: any = { offset: 0, size: 0 };\n\n\t/**@internal */\n\tprivate static _strings: any[] = [];\n\t/**@internal */\n\tprivate static _readData: Byte;\n\t/**@internal */\n\tprivate static _version: string;\n\t/**@internal */\n\tprivate static _mesh: Mesh;\n\t/**@internal */\n\tprivate static _subMeshes: SubMesh[];\n\t/**@internal */\n\t static _bindPoseIndices: number[] = [];\n\n\t/**\n\t * @internal\n\t */\n\tstatic parse(readData: Byte, version: string, mesh: Mesh, subMeshes: SubMesh[]): void {\n\t\tGPUSkiningLoadModelV05._mesh = mesh;\n\t\tGPUSkiningLoadModelV05._subMeshes = subMeshes;\n\t\tGPUSkiningLoadModelV05._version = version;\n\t\tGPUSkiningLoadModelV05._readData = readData;\n\t\tGPUSkiningLoadModelV05.READ_DATA();\n\t\tGPUSkiningLoadModelV05.READ_BLOCK();\n\t\tGPUSkiningLoadModelV05.READ_STRINGS();\n\t\tfor (var i: number = 0, n: number = GPUSkiningLoadModelV05._BLOCK.count; i < n; i++) {\n\t\t\tGPUSkiningLoadModelV05._readData.pos = GPUSkiningLoadModelV05._BLOCK.blockStarts[i];\n\t\t\tvar index: number = GPUSkiningLoadModelV05._readData.getUint16();\n\t\t\tvar blockName: string = GPUSkiningLoadModelV05._strings[index];\n\t\t\tvar fn: Function = GPUSkiningLoadModelV05[\"READ_\" + blockName];\n\t\t\tif (fn == null)\n\t\t\t\tthrow new Error(\"model file err,no this function:\" + index + \" \" + blockName);\n\t\t\telse\n\t\t\t\tfn.call(null);\n\t\t}\n\t\tGPUSkiningLoadModelV05._mesh._bindPoseIndices = new Uint16Array(GPUSkiningLoadModelV05._bindPoseIndices);\n\t\tGPUSkiningLoadModelV05._bindPoseIndices.length = 0;\n\t\tGPUSkiningLoadModelV05._strings.length = 0;\n\t\tGPUSkiningLoadModelV05._readData = null;\n\t\tGPUSkiningLoadModelV05._version = null;\n\t\tGPUSkiningLoadModelV05._mesh = null;\n\t\tGPUSkiningLoadModelV05._subMeshes = null;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tprivate static _readString(): string {\n\t\treturn GPUSkiningLoadModelV05._strings[GPUSkiningLoadModelV05._readData.getUint16()];\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tprivate static READ_DATA(): void {\n\t\tGPUSkiningLoadModelV05._DATA.offset = GPUSkiningLoadModelV05._readData.getUint32();\n\t\tGPUSkiningLoadModelV05._DATA.size = GPUSkiningLoadModelV05._readData.getUint32();\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tprivate static READ_BLOCK(): void {\n\t\tvar count: number = GPUSkiningLoadModelV05._BLOCK.count = GPUSkiningLoadModelV05._readData.getUint16();\n\t\tvar blockStarts: any[] = GPUSkiningLoadModelV05._BLOCK.blockStarts = [];\n\t\tvar blockLengths: any[] = GPUSkiningLoadModelV05._BLOCK.blockLengths = [];\n\t\tfor (var i: number = 0; i < count; i++) {\n\t\t\tblockStarts.push(GPUSkiningLoadModelV05._readData.getUint32());\n\t\t\tblockLengths.push(GPUSkiningLoadModelV05._readData.getUint32());\n\t\t}\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tprivate static READ_STRINGS(): void {\n\t\tvar offset: number = GPUSkiningLoadModelV05._readData.getUint32();\n\t\tvar count: number = GPUSkiningLoadModelV05._readData.getUint16();\n\t\tvar prePos: number = GPUSkiningLoadModelV05._readData.pos;\n\t\tGPUSkiningLoadModelV05._readData.pos = offset + GPUSkiningLoadModelV05._DATA.offset;\n\n\t\tfor (var i: number = 0; i < count; i++)\n\t\t\tGPUSkiningLoadModelV05._strings[i] = GPUSkiningLoadModelV05._readData.readUTFString();\n\n\t\tGPUSkiningLoadModelV05._readData.pos = prePos;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tprivate static READ_MESH(): boolean {\n\t\tvar gl: WebGLRenderingContext = LayaGL.instance;\n\t\tvar i: number, n: number;\n\t\tvar memorySize: number = 0;\n\t\tvar name: string = GPUSkiningLoadModelV05._readString();\n\t\tvar reader: Byte = GPUSkiningLoadModelV05._readData;\n\t\tvar arrayBuffer: ArrayBuffer = reader.__getBuffer();\n\t\tvar vertexBufferCount: number = reader.getInt16();\n\t\tvar offset: number = GPUSkiningLoadModelV05._DATA.offset;\n\t\tfor (i = 0; i < vertexBufferCount; i++) {//TODO:始终为1\n\t\t\tvar vbStart: number = offset + reader.getUint32();\n\t\t\tvar vertexCount: number = reader.getUint32();\n\t\t\tvar vertexFlag: string = GPUSkiningLoadModelV05._readString();\n\t\t\tvar vertexDeclaration: VertexDeclaration = GPUSkiningVertexMesh.getVertexDeclaration(vertexFlag, false);\n\n\t\t\tvar vertexStride: number = vertexDeclaration.vertexStride;\n\t\t\tvar vertexData: ArrayBuffer;\n\t\t\tvar floatData: Float32Array;\n\t\t\tvar uint8Data: Uint8Array;\n\n\t\t\tvar subVertexFlags: any[] = vertexFlag.split(\",\");\n\t\t\tvar subVertexCount: number = subVertexFlags.length;\n\t\t\tvar mesh: Mesh = GPUSkiningLoadModelV05._mesh;\n\n\t\t\tswitch (GPUSkiningLoadModelV05._version) {\n\t\t\t\tcase \"LAYAMODEL:05\":\n\t\t\t\tcase \"LAYAMODEL:GPUSkining_05\": \n\t\t\t\t\tvertexData = arrayBuffer.slice(vbStart, vbStart + vertexCount * vertexStride);\n\t\t\t\t\tfloatData = new Float32Array(vertexData);\n\t\t\t\t\tuint8Data = new Uint8Array(vertexData);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"LAYAMODEL:COMPRESSION_05\":\n\t\t\t\t\tvertexData = new ArrayBuffer(vertexStride * vertexCount);\n\t\t\t\t\tfloatData = new Float32Array(vertexData);\n\t\t\t\t\tuint8Data = new Uint8Array(vertexData);\n\t\t\t\t\tvar lastPosition: number = reader.pos;\n\t\t\t\t\treader.pos = vbStart;\n\n\t\t\t\t\tfor (var j: number = 0; j < vertexCount; j++) {\n\t\t\t\t\t\tvar subOffset: number;\n\t\t\t\t\t\tvar verOffset: number = j * vertexStride;\n\t\t\t\t\t\tfor (var k: number = 0; k < subVertexCount; k++) {\n\t\t\t\t\t\t\tswitch (subVertexFlags[k]) {\n\t\t\t\t\t\t\t\tcase \"POSITION\":\n\t\t\t\t\t\t\t\t\tsubOffset = verOffset / 4;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset] = HalfFloatUtils.convertToNumber(reader.getUint16());\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 1] = HalfFloatUtils.convertToNumber(reader.getUint16());\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 2] = HalfFloatUtils.convertToNumber(reader.getUint16());\n\t\t\t\t\t\t\t\t\tverOffset += 12;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"NORMAL\":\n\t\t\t\t\t\t\t\t\tsubOffset = verOffset / 4;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset] = reader.getUint8() / 127.5 - 1;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 1] = reader.getUint8() / 127.5 - 1;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 2] = reader.getUint8() / 127.5 - 1;\n\t\t\t\t\t\t\t\t\tverOffset += 12;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"COLOR\":\n\t\t\t\t\t\t\t\t\tsubOffset = verOffset / 4;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset] = reader.getUint8() / 255;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 1] = reader.getUint8() / 255;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 2] = reader.getUint8() / 255;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 3] = reader.getUint8() / 255;\n\t\t\t\t\t\t\t\t\tverOffset += 16;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"UV\":\n\t\t\t\t\t\t\t\t\tsubOffset = verOffset / 4;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset] = HalfFloatUtils.convertToNumber(reader.getUint16());\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 1] = HalfFloatUtils.convertToNumber(reader.getUint16());\n\t\t\t\t\t\t\t\t\tverOffset += 8;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"UV1\":\n\t\t\t\t\t\t\t\t\tsubOffset = verOffset / 4;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset] = HalfFloatUtils.convertToNumber(reader.getUint16());\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 1] = HalfFloatUtils.convertToNumber(reader.getUint16());\n\t\t\t\t\t\t\t\t\tverOffset += 8;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"BLENDWEIGHT\":\n\t\t\t\t\t\t\t\t\tsubOffset = verOffset / 4;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset] = reader.getUint8() / 255;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 1] = reader.getUint8() / 255;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 2] = reader.getUint8() / 255;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 3] = reader.getUint8() / 255;\n\t\t\t\t\t\t\t\t\tverOffset += 16;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"BLENDINDICES\":\n\t\t\t\t\t\t\t\t\tuint8Data[verOffset] = reader.getUint8();\n\t\t\t\t\t\t\t\t\tuint8Data[verOffset + 1] = reader.getUint8();\n\t\t\t\t\t\t\t\t\tuint8Data[verOffset + 2] = reader.getUint8();\n\t\t\t\t\t\t\t\t\tuint8Data[verOffset + 3] = reader.getUint8();\n\t\t\t\t\t\t\t\t\tverOffset += 4;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"TANGENT\":\n\t\t\t\t\t\t\t\t\tsubOffset = verOffset / 4;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset] = reader.getUint8() / 127.5 - 1;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 1] = reader.getUint8() / 127.5 - 1;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 2] = reader.getUint8() / 127.5 - 1;\n\t\t\t\t\t\t\t\t\tfloatData[subOffset + 3] = reader.getUint8() / 127.5 - 1;\n\t\t\t\t\t\t\t\t\tverOffset += 16;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treader.pos = lastPosition;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar vertexBuffer: VertexBuffer3D = new VertexBuffer3D(vertexData.byteLength, gl.STATIC_DRAW, true);\n\t\t\tvertexBuffer.vertexDeclaration = vertexDeclaration;\n\t\t\tvertexBuffer.setData(vertexData);\n\t\t\tvar vertexCount: number = vertexBuffer._byteLength / vertexDeclaration.vertexStride;\n\t\t\t//TDDO:是否加标记\n\t\t\tif (vertexCount > 65535)\n\t\t\t\tmesh._indexFormat = IndexFormat.UInt32;\n\t\t\telse\n\t\t\t\tmesh._indexFormat = IndexFormat.UInt16;\n\t\t\tmesh._vertexBuffer = vertexBuffer;\n\t\t\tmesh._vertexCount += vertexCount;\n\t\t\tmemorySize += floatData.length * 4;\n\t\t}\n\n\t\tvar ibStart: number = offset + reader.getUint32();\n\t\tvar ibLength: number = reader.getUint32();\n\n\t\tvar ibDatas: Uint16Array | Uint32Array;\n\t\tif (mesh.indexFormat == <any>IndexFormat.UInt32)\n\t\t\tibDatas = new Uint32Array(arrayBuffer.slice(ibStart, ibStart + ibLength));\n\t\telse\n\t\t\tibDatas = new Uint16Array(arrayBuffer.slice(ibStart, ibStart + ibLength));\n\n\t\tvar indexBuffer: IndexBuffer3D = new IndexBuffer3D(mesh.indexFormat, ibDatas.length, gl.STATIC_DRAW, true);\n\t\tindexBuffer.setData(ibDatas);\n\t\tmesh._indexBuffer = indexBuffer;\n\n\t\tmesh._setBuffer(mesh._vertexBuffer, indexBuffer);\n\n\t\tmemorySize += indexBuffer.indexCount * 2;\n\t\tmesh._setCPUMemory(memorySize);\n\t\tmesh._setGPUMemory(memorySize);\n\n\t\tvar boneNames: string[] = mesh._boneNames = [];\n\t\tvar boneCount: number = reader.getUint16();\n\t\tboneNames.length = boneCount;\n\t\tfor (i = 0; i < boneCount; i++)\n\t\t\tboneNames[i] = GPUSkiningLoadModelV05._strings[reader.getUint16()];//[兼容性]\n\n\t\tvar bindPoseDataStart: number = reader.getUint32();\n\t\tvar bindPoseDataLength: number = reader.getUint32();\n\t\tvar bindPoseDatas: Float32Array = new Float32Array(arrayBuffer.slice(offset + bindPoseDataStart, offset + bindPoseDataStart + bindPoseDataLength));\n\t\tvar bindPoseFloatCount: number = bindPoseDatas.length;\n\t\tvar bindPoseCount: number = bindPoseFloatCount / 16;\n\t\tvar bindPoseBuffer: ArrayBuffer = mesh._inverseBindPosesBuffer = new ArrayBuffer(bindPoseFloatCount * 4);//TODO:[NATIVE]临时\n\t\tmesh._inverseBindPoses = [];\n\t\tfor (i = 0; i < bindPoseFloatCount; i += 16) {\n\t\t\tvar inverseGlobalBindPose: Matrix4x4 = new Matrix4x4(bindPoseDatas[i + 0], bindPoseDatas[i + 1], bindPoseDatas[i + 2], bindPoseDatas[i + 3], bindPoseDatas[i + 4], bindPoseDatas[i + 5], bindPoseDatas[i + 6], bindPoseDatas[i + 7], bindPoseDatas[i + 8], bindPoseDatas[i + 9], bindPoseDatas[i + 10], bindPoseDatas[i + 11], bindPoseDatas[i + 12], bindPoseDatas[i + 13], bindPoseDatas[i + 14], bindPoseDatas[i + 15], new Float32Array(bindPoseBuffer, i * 4, 16));\n\t\t\tmesh._inverseBindPoses[i / 16] = inverseGlobalBindPose;\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * @internal\n\t */\n\tprivate static READ_SUBMESH(): boolean {\n\t\tvar reader: Byte = GPUSkiningLoadModelV05._readData;\n\t\tvar arrayBuffer: ArrayBuffer = reader.__getBuffer();\n\t\tvar subMesh: SubMesh = new SubMesh(GPUSkiningLoadModelV05._mesh);\n\n\t\treader.getInt16();//TODO:vbIndex\n\t\tvar ibStart: number = reader.getUint32();\n\t\tvar ibCount: number = reader.getUint32();\n\t\tvar indexBuffer: IndexBuffer3D = GPUSkiningLoadModelV05._mesh._indexBuffer;\n\t\tsubMesh._indexBuffer = indexBuffer;\n\t\tsubMesh._setIndexRange(ibStart, ibCount);\n\t\tvar vertexBuffer: VertexBuffer3D = GPUSkiningLoadModelV05._mesh._vertexBuffer;\n\t\tsubMesh._vertexBuffer = vertexBuffer;\n\n\t\tvar offset: number = GPUSkiningLoadModelV05._DATA.offset;\n\t\tvar subIndexBufferStart: number[] = subMesh._subIndexBufferStart;\n\t\tvar subIndexBufferCount: number[] = subMesh._subIndexBufferCount;\n\t\tvar boneIndicesList: Uint16Array[] = subMesh._boneIndicesList;\n\t\tvar drawCount: number = reader.getUint16();\n\t\tsubIndexBufferStart.length = drawCount;\n\t\tsubIndexBufferCount.length = drawCount;\n\t\tboneIndicesList.length = drawCount;\n\n\t\tvar pathMarks: any[][] = GPUSkiningLoadModelV05._mesh._skinDataPathMarks;\n\t\tvar bindPoseIndices: number[] = GPUSkiningLoadModelV05._bindPoseIndices;\n\t\tvar subMeshIndex: number = GPUSkiningLoadModelV05._subMeshes.length;\n\t\tfor (var i: number = 0; i < drawCount; i++) {\n\t\t\tsubIndexBufferStart[i] = reader.getUint32();\n\t\t\tsubIndexBufferCount[i] = reader.getUint32();\n\t\t\tvar boneDicofs: number = reader.getUint32();\n\t\t\tvar boneDicCount: number = reader.getUint32();\n\t\t\tvar boneIndices: Uint16Array = boneIndicesList[i] = new Uint16Array(arrayBuffer.slice(offset + boneDicofs, offset + boneDicofs + boneDicCount));\n\t\t\tfor (var j: number = 0, m: number = boneIndices.length; j < m; j++) {\n\t\t\t\tvar index: number = boneIndices[j];\n\t\t\t\tvar combineIndex: number = bindPoseIndices.indexOf(index);\n\t\t\t\tif (combineIndex === -1) {\n\t\t\t\t\tboneIndices[j] = bindPoseIndices.length;\n\t\t\t\t\tbindPoseIndices.push(index);\n\t\t\t\t\tpathMarks.push([subMeshIndex, i, j]);\n\t\t\t\t} else {\n\t\t\t\t\tboneIndices[j] = combineIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tGPUSkiningLoadModelV05._subMeshes.push(subMesh);\n\t\treturn true;\n\t}\n\n}\n\n\n","import Mesh = Laya.Mesh;\nimport SubMesh = Laya.SubMesh;\nimport Byte = Laya.Byte;\nimport { GPUSkiningLoadModelV05 } from \"./GPUSkiningLoadModelV05\";\n\nexport class GPUSkiningMeshReader \n{\n\n     static read(data:ArrayBuffer, mesh:Mesh, subMeshes:SubMesh[]):void \n     {\n        var readData:Byte = new Byte(data);\n        readData.pos = 0;\n        var version:string = readData.readUTFString();\n        switch (version) \n        {\n            case \"LAYAMODEL:GPUSkining_05\": \n                GPUSkiningLoadModelV05.parse(readData, version, mesh, subMeshes);\n                break;\n            default: \n                throw new Error(\"MeshReader: unknown mesh version.\");\n        }\n        mesh._setSubMeshes(subMeshes);\n    }\n}","import { GPUSkiningMeshReader } from \"./GPUSkiningMeshReader\";\n\nexport default class GPUSkiningMesh extends Laya.Mesh\n{\n    static _parse(data: any, propertyParams: any = null, constructParams: any[] = null): GPUSkiningMesh \n    {\n\t\tvar mesh: GPUSkiningMesh = new GPUSkiningMesh();\n\t\tGPUSkiningMeshReader.read(<ArrayBuffer>data, mesh, mesh._subMeshes);\n\t\treturn mesh;\n\t}\n\n\tstatic LoadAsync(path: string): Promise<GPUSkiningMesh>\n\t{\n\t\treturn new  Promise<GPUSkiningMesh>((resolve)=>\n\t\t{\n\t\t\tLaya.loader.load(path, Laya.Handler.create(this, (data:any)=>\n\t\t\t{\n\t\t\t\tif(data instanceof ArrayBuffer)\n\t\t\t\t{\n\t\t\t\t\tvar mesh = GPUSkiningMesh._parse(data);\n\t\t\t\t\tresolve(mesh);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t}), null, Laya.Loader.BUFFER);\n\t\t});\n\t}\n}","\nimport LoaderManager = Laya.LoaderManager;\nimport Loader = Laya.Loader;\nimport Event = Laya.Event;\nimport GPUSkining from \"../GPUSkining\";\n\nexport default class Laya3D_Extend\n{\n    static Init()\n    {\n        var _Laya3D:any = Laya3D;\n        _Laya3D._onMeshLmLoaded__src = _Laya3D._onMeshLmLoaded;\n        _Laya3D._onMeshLmLoaded = this._onMeshLmLoaded;\n    }\n    \n    private static _onMeshLmLoaded__src(loader: Loader, lmData: ArrayBuffer): void \n    {\n    }\n\n    private static _onMeshLmLoaded(loader: Loader, lmData: ArrayBuffer): void \n    {\n        var extension:string = Laya.Utils.getFileExtension(loader.url);\n        if(extension == GPUSkining.EXT_SKING_MESH)\n        {\n            GPUSkining._onMeshLmLoaded(loader, lmData);\n        }\n        else\n        {\n            this._onMeshLmLoaded__src(loader, lmData);\n        }\n        \n\t}\n}","\nimport Byte = Laya.Byte;\nimport Bounds = Laya.Bounds;\nimport Vector3 = Laya.Vector3;\nimport Quaternion = Laya.Quaternion;\n\nimport Matrix4x4 = Laya.Matrix4x4;\nexport default class ByteReadUtil\n{\n    \n    \n    static ReadQuaternion(b:Byte):Quaternion\n    {\n        var v = new Quaternion();\n        v.x = b.readFloat32();\n        v.y = b.readFloat32();\n        v.z = b.readFloat32();\n        v.w = b.readFloat32();\n        return v;\n    }\n    \n    static ReadVector3(b:Byte):Vector3\n    {\n        var v = new Vector3();\n        v.x = b.readFloat32() * -1;\n        v.y = b.readFloat32();\n        v.z = b.readFloat32();\n        return v;\n    }\n\n    static ReadBounds(b:Byte):Bounds\n    {\n        var min = this.ReadVector3(b);\n        var max = this.ReadVector3(b);\n        var v = new Bounds(min, max);\n        return v;\n    }\n\n    \n    static ReadMatrix4x4(b:Byte):Matrix4x4\n    {\n        var m00 = b.readFloat32();\n        var m01 = b.readFloat32();\n        var m02 = b.readFloat32();\n        var m03 = b.readFloat32();\n\n        \n        var m10 = b.readFloat32();\n        var m11 = b.readFloat32();\n        var m12 = b.readFloat32();\n        var m13 = b.readFloat32();\n\n        \n        var m20 = b.readFloat32();\n        var m21 = b.readFloat32();\n        var m22 = b.readFloat32();\n        var m23 = b.readFloat32();\n        \n        var m30 = b.readFloat32();\n        var m31 = b.readFloat32();\n        var m32 = b.readFloat32();\n        var m33 = b.readFloat32();\n        var v = new Matrix4x4\n        (\n            m00, m01, m02, m03,\n            m10, m11, m12, m13,\n            m20, m21, m22, m23,\n            m30, m31, m32, m33,\n        );\n        return v;\n    }\n}","import Matrix4x4 = Laya.Matrix4x4;\nimport ByteReadUtil from \"./ByteReadUtil\";\n/** 烘焙动画--骨骼节点信息 */\nexport default class GPUSkinningBone\n{\n    /** 编号 */\n    guid: string;\n\n    /** 名称 */\n    name: string;\n\n    /** 是否导出 */\n    isExposed: boolean;\n\n    /** 矩阵 */\n    bindpose: Matrix4x4;\n\n    /** 父节点索引 */\n    parentBoneIndex: int = -1;\n\n    /** 子节点索引 */\n    childrenBonesIndices: int[];\n\n    /** 是否生成了逆矩阵 */\n    private _bindposeInvInit = false;\n\n    private _bindposeInv: Matrix4x4;\n    /** 逆矩阵 */\n    public get BindposeInv(): Matrix4x4\n    {\n        if(!this._bindposeInv)\n        {\n            this._bindposeInv = new Matrix4x4();\n            this.bindpose.invert(this._bindposeInv);\n            this._bindposeInvInit = true;\n        }\n        return this._bindposeInv;\n    }\n    \n    FromBytes(data: ArrayBuffer): void\n    {\n        var b:Laya.Byte = new Laya.Byte(data);\n        this.name = b.readUTFString();\n        this.guid = b.readUTFString();\n        this.isExposed = b.readByte() != 0;\n        this.parentBoneIndex = b.readInt32();\n        this.bindpose = ByteReadUtil.ReadMatrix4x4(b);\n\n    }\n\n    static CreateFromBytes(data: ArrayBuffer):GPUSkinningBone\n    {\n        var obj = new GPUSkinningBone();\n        obj.FromBytes(data);\n        return obj;\n    }\n\n\n}","\n/** 烘焙动画--动画剪辑事件 */\nexport default class GPUSkinningAnimEvent  \n{\n    /** 帧索引 */\n    frameIndex:int = 0;\n\n    /** 事件ID */\n    eventId:int = 0;\n\n    /** 比较 */\n    CompareTo(other: GPUSkinningAnimEvent): int\n    {\n        return this.frameIndex > other.frameIndex ? -1 : 1;\n    }\n\n    \n    FromBytes(data: ArrayBuffer): void\n    {\n        var b:Laya.Byte = new Laya.Byte(data);\n        this.frameIndex = b.readInt32();\n        this.eventId = b.readInt32();\n\n    }\n\n    static CreateFromBytes(data: ArrayBuffer):GPUSkinningAnimEvent\n    {\n        var obj = new GPUSkinningAnimEvent();\n        obj.FromBytes(data);\n        return obj;\n    }\n}","import Matrix4x4 = Laya.Matrix4x4;\nimport Quaternion = Laya.Quaternion;\nimport ByteReadUtil from \"./ByteReadUtil\";\n\n/** 烘焙动画--动画剪辑帧数据信息 */\nexport default class GPUSkinningFrame\n{\n    /** 矩阵 */\n    matrices: Matrix4x4[];\n\n    /** 相对根节点偏移--方向  */\n    rootMotionDeltaPositionQ: Quaternion;\n    \n    /** 相对根节点偏移--距离  */\n    rootMotionDeltaPositionL: float;\n\n    /** 相对根节点偏移 */\n    rootMotionDeltaRotation: Quaternion;\n\n    /** 是否根节点初始化逆矩阵 */\n    private rootMotionInvInit: boolean = false;\n    private rootMotionInv: Matrix4x4;\n    /** 根节点逆矩阵 */\n    public RootMotionInv(rootBoneIndex: int ):Matrix4x4\n    {\n        if (!this.rootMotionInvInit)\n        {\n            let m =  this.matrices[rootBoneIndex];\n            this.rootMotionInv = new Matrix4x4();\n            m.invert(this.rootMotionInv);\n            this.rootMotionInvInit = true;\n        }\n        return this.rootMotionInv;\n    }\n\n    \n    FromBytes(data: ArrayBuffer): void\n    {\n        var b:Laya.Byte = new Laya.Byte(data);\n        this.rootMotionDeltaPositionL = b.readFloat32();\n        this.rootMotionDeltaPositionQ = ByteReadUtil.ReadQuaternion(b);\n        this.rootMotionDeltaRotation = ByteReadUtil.ReadQuaternion(b);\n\n        var matricesCount = b.readUint32();\n        this.matrices = [];\n        for(var i = 0; i < matricesCount; i ++)\n        {\n            var m = ByteReadUtil.ReadMatrix4x4(b);\n            this.matrices.push(m);\n        }\n        \n\n    }\n\n    static CreateFromBytes(data: ArrayBuffer):GPUSkinningFrame\n    {\n        var obj = new GPUSkinningFrame();\n        obj.FromBytes(data);\n        return obj;\n    }\n\n\n\n}","import { GPUSkinningWrapMode } from \"./GPUSkinningWrapMode\";\nimport GPUSkinningAnimEvent from \"./GPUSkinningAnimEvent\";\nimport GPUSkinningFrame from \"./GPUSkinningFrame\";\n\nimport Byte = Laya.Byte;\nimport ByteReadUtil from \"./ByteReadUtil\";\n/** 烘焙动画--动画剪辑数据信息 */\nexport default class GPUSkinningClip\n{\n    /** 名称 */\n    name: string;\n\n    /** 时间长度 （单位:秒） */\n    length = 0.0;\n\n    /** 播放帧率 （默认30） */\n    fps = 0;\n\n    /** 播放模式，单次或者循环 */\n    wrapMode = GPUSkinningWrapMode.Once;\n\n    /** 帧数据列表 */\n    frames: GPUSkinningFrame[];\n\n    /** 所在贴图像素起始位置 */\n    pixelSegmentation:int = 0;\n\n    /** 是否动画驱动位移 */\n    rootMotionEnabled: boolean = false;\n\n    /** 多个单位播放动作帧是否差异化 */\n    individualDifferenceEnabled: boolean = false;\n\n    /** 事件列表 */\n    events: GPUSkinningAnimEvent[];\n\n\n    \n    FromBytes(data: ArrayBuffer): void\n    {\n        var b:Byte = new Byte(data);\n        b.pos = 0;\n        this.name = b.readUTFString();\n        this.length = b.readFloat32();\n        this.fps = b.readUint32();\n        this.wrapMode = b.readInt32();\n        this.pixelSegmentation = b.readUint32();\n        this.rootMotionEnabled = b.readByte() != 0;\n        this.individualDifferenceEnabled = b.readByte() != 0;\n\n        // 帧列表 数量\n        var frameCount = b.readUint32();\n        // 事件列表 数量\n        var eventCount = b.readUint32();\n        \n        // 帧列表 头信息\n        var framePosLengthList:int[][] = [];\n        for(var i = 0; i < frameCount; i ++)\n        {\n            var info = [];\n            info[0] = b.readUint32(); // posBegin\n            info[1] = b.readUint32(); // length\n            framePosLengthList.push(info);\n        }\n\n        \n        // 事件列表 头信息\n        var eventPosLengthList:int[][] = [];\n        for(var i = 0; i < eventCount; i ++)\n        {\n            var info = [];\n            info[0] = b.readUint32(); // posBegin\n            info[1] = b.readUint32(); // length\n            eventPosLengthList.push(info);\n        }\n\n        \n        // 帧列表 数据块\n        var frameList: GPUSkinningFrame[] = [];\n        this.frames = frameList;\n        for(var i = 0; i < frameCount; i ++)\n        {\n            var itemInfo:int[] = framePosLengthList[i];\n            var pos = itemInfo[0];\n            var len = itemInfo[1];\n\n            b.pos = pos;\n            var itemBuffer = b.readArrayBuffer(len);\n            var item:any = GPUSkinningFrame.CreateFromBytes(itemBuffer);\n            frameList.push(item);\n        }\n\n\n        \n        // 事件列表 数据块\n        var eventList: GPUSkinningAnimEvent[] = [];\n        this.events = eventList;\n        for(var i = 0; i < eventCount; i ++)\n        {\n            var itemInfo:int[] = eventPosLengthList[i];\n            var pos = itemInfo[0];\n            var len = itemInfo[1];\n\n            b.pos = pos;\n            var itemBuffer = b.readArrayBuffer(len);\n            var item:any = GPUSkinningAnimEvent.CreateFromBytes(itemBuffer);\n            eventList.push(item);\n        }\n\n\n    }\n\n    static CreateFromBytes(data: ArrayBuffer):GPUSkinningClip\n    {\n        var obj = new GPUSkinningClip();\n        obj.FromBytes(data);\n        return obj;\n    }\n}","import GPUSkinningBone from \"./GPUSkinningBone\";\nimport GPUSkinningClip from \"./GPUSkinningClip\";\nimport { GPUSkinningQuality } from \"./GPUSkinningQuality\";\n\nimport Byte = Laya.Byte;\nimport ByteReadUtil from \"./ByteReadUtil\";\n\n/** 烘焙动画--全部数据信息 */\nexport default class GPUSkinningAnimation\n{\n    version:string;\n    /** 编号 */\n    guid: string;\n\n    /** 名称 */\n    name: string;\n\n    bonesCount = 67;\n\n    /** 骨骼列表 */\n    bones: GPUSkinningBone[];\n\n    /** 根骨骼 */\n    rootBoneIndex: int = 0;\n\n    /** 动作列表 */\n    clips: GPUSkinningClip[];\n\n    /** 盒子大小 */\n    bounds: Laya.Bounds;\n\n    /** 动作贴图宽 */\n    textureWidth: number = 0;\n\n    /** 动作贴图高 */\n    textureHeight: number = 0;\n\n    /** lod模式 距离列表 */\n    lodDistances: float[];\n\n    /** lod模式 Mesh列表 */\n    lodMeshes: Laya.Mesh[];\n    \n    /** 裁剪用 CullingBounds */\n    sphereRadius: float = 1.0;\n\n    /** 骨骼品质 */\n    skinQuality:GPUSkinningQuality = GPUSkinningQuality.Bone4;\n\n    FromBytes(arrayBuffer: ArrayBuffer): void\n    {\n        \n        // var b:Byte = new Byte(arrayBuffer);\n        // b.pos = 0;\n        // var vision = b.readUTFString();\n        // var len = b.readUint32();\n        // var arrayBuffer = arrayBuffer.slice(b.pos, pos + len);\n\n        var b:Byte = new Byte(arrayBuffer);\n        b.pos = 0;\n\n        this.guid = b.readUTFString();\n        this.name = b.readUTFString();\n        this.rootBoneIndex = b.readInt16();\n        this.textureWidth = b.readUint32();\n        this.textureHeight = b.readUint32();\n        this.sphereRadius = b.readFloat32();\n        this.bounds = ByteReadUtil.ReadBounds(b);\n\n        \n        // 剪辑列表 数量\n        var clipCount = b.readUint32();\n        // 骨骼列表 数量\n        var boneCount = b.readUint32();\n\n\n        // 剪辑列表 头信息\n        var clipPosLengthList:int[][] = [];\n        for(var i = 0; i < clipCount; i ++)\n        {\n            var info = [];\n            info[0] = b.readUint32(); // posBegin\n            info[1] = b.readUint32(); // length\n            clipPosLengthList.push(info);\n        }\n\n\n        // 骨骼列表 头信息\n        var bonePosLengthList:int[][] = [];\n        for(var i = 0; i < boneCount; i ++)\n        {\n            var info = [];\n            info[0] = b.readUint32(); // posBegin\n            info[1] = b.readUint32(); // length\n            bonePosLengthList.push(info);\n        }\n\n        \n        // 剪辑列表 数据块\n        var clipList: GPUSkinningClip[] = [];\n        this.clips = clipList;\n        for(var i = 0; i < clipCount; i ++)\n        {\n            var itemInfo:int[] = clipPosLengthList[i];\n            var pos = itemInfo[0];\n            var len = itemInfo[1];\n\n            b.pos = pos;\n\n            var itemBuffer = b.readArrayBuffer(len);\n            var item:any = GPUSkinningClip.CreateFromBytes(itemBuffer);\n            clipList.push(item);\n        }\n\n        \n        // 骨骼列表 数据块\n        var boneList: GPUSkinningBone[] = [];\n        this.bones = boneList;\n        for(var i = 0; i < boneCount; i ++)\n        {\n            var itemInfo:int[] = bonePosLengthList[i];\n            var pos = itemInfo[0];\n            var len = itemInfo[1];\n\n            b.pos = pos;\n            b.pos = pos;\n            var itemBuffer = b.readArrayBuffer(len);\n            var item:any = GPUSkinningBone.CreateFromBytes(itemBuffer);\n            boneList.push(item);\n        }\n\n    }\n\n    static CreateFromBytes(data: ArrayBuffer):GPUSkinningAnimation\n    {\n        \n        var b:Byte = new Byte(data);\n        b.pos = 0;\n        var version = b.readUTFString();\n        var len = b.readUint32();\n        var arrayBuffer = b.readArrayBuffer(len);\n\n        var obj = new GPUSkinningAnimation();\n        obj.version = version;\n        obj.FromBytes(arrayBuffer);\n        return obj;\n    }\n\n\n    static async LoadAsync(path: string):Promise<GPUSkinningAnimation>\n    {\n        return new Promise<GPUSkinningAnimation>((resolve)=>\n        {\n            this.Load(path, (anim: GPUSkinningAnimation)=>\n            {\n                resolve(anim);\n            });\n        });\n\n    }\n\n    \n    static Load(path: string, callback:(  (anim: GPUSkinningAnimation) => any)  ):void\n    {\n        Laya.loader.load(path, Laya.Handler.create(this, (data: ArrayBuffer)=>\n        {\n            var obj = GPUSkinningAnimation.CreateFromBytes(data);\n            if(callback)\n            {\n                callback(obj);\n            }\n        }), null, Laya.Loader.BUFFER)\n    }\n\n}","import Shader3D = Laya.Shader3D;\nimport BaseTexture = Laya.BaseTexture;\nimport ShaderDefine = Laya.ShaderDefine;\n\n\nexport class GPUSkinningBaseMaterial extends Laya.Material\n{\n    static SHADER_PATH_ROOT = \"res/shaders/GPUSkinning/\";\n    \n    // 获取--Shader路径--vs\n    static getShaderVS(filename: string)\n    {\n        return this.SHADER_PATH_ROOT + filename  + \".vs\";\n    }\n\n    // 获取--Shader路径--ps\n    static getShaderPS(filename: string)\n    {\n        return this.SHADER_PATH_ROOT + filename  + \".fs\";\n    }\n\n    \n    // 获取--Shader路径--glsl\n    static getShaderGLSL(filename: string)\n    {\n        return this.SHADER_PATH_ROOT + filename  + \".glsl\";\n    }\n\n    \n    // 加载Shader\n    static async loadShaderGlslAsync(filename: string): Promise<string>\n    {\n        let code = await this.loadAsync(this.getShaderGLSL(filename), Laya.Loader.TEXT);\n        return code.replace(/\\r/g, \"\");\n    }\n    \n    // 加载Shader\n    static async loadShaderVSAsync(filename: string): Promise<string>\n    {\n        let code = await this.loadAsync(this.getShaderVS(filename), Laya.Loader.TEXT);\n        return code.replace(/\\r/g, \"\");\n    }\n\n    // 加载Shader\n    static async loadShaderPSAsync(filename: string): Promise<string>\n    {\n        let code =  await this.loadAsync(this.getShaderPS(filename), Laya.Loader.TEXT);\n        return code.replace(/\\r/g, \"\");\n    }\n\n    \n    // 加载资源, 异步\n    static async loadAsync(path: string, type: string): Promise<any>\n    {\n        return new Promise<any>((resolve)=>\n        {\n            Laya.loader.load(path, \n                Laya.Handler.create(null, (res: any) =>\n                {\n                    resolve(res);\n                }), \n                null, type);\n         });\n    }\n\n    \n    static GPUSKINING_MATRIX_TEXTURE: number = Shader3D.propertyNameToID(\"u_GPUSkinning_TextureMatrix\");\n    \n\tstatic SHADERDEFINE_GPUSKINING_MATRIX_TEXTURE: ShaderDefine;\n\n    static __initDefine__(): void {\n\t\tthis.SHADERDEFINE_GPUSKINING_MATRIX_TEXTURE = Shader3D.getDefineByName(\"GPUSKINING_MATRIX_TEXTURE\");\n\t}\n    \n\t/**\n\t * 骨骼动画贴图。\n\t */\n    get GPUSkinning_TextureMatrix(): BaseTexture \n    {\n\t\treturn this._shaderValues.getTexture(GPUSkinningBaseMaterial.GPUSKINING_MATRIX_TEXTURE);\n\t}\n\n    set GPUSkinning_TextureMatrix(value: BaseTexture) \n    {\n\t\tif (value)\n\t\t\tthis._shaderValues.addDefine(GPUSkinningBaseMaterial.SHADERDEFINE_GPUSKINING_MATRIX_TEXTURE);\n\t\telse\n\t\t\tthis._shaderValues.removeDefine(GPUSkinningBaseMaterial.SHADERDEFINE_GPUSKINING_MATRIX_TEXTURE);\n\t\tthis._shaderValues.setTexture(GPUSkinningBaseMaterial.GPUSKINING_MATRIX_TEXTURE, value);\n\t}\n\n\n}","\r\nimport Shader3D = Laya.Shader3D;\r\nimport SubShader = Laya.SubShader;\r\nimport SkinnedMeshSprite3D = Laya.SkinnedMeshSprite3D;\r\nimport VertexMesh = Laya.VertexMesh;\r\nimport ShaderDefine = Laya.ShaderDefine;\r\nimport Vector4 = Laya.Vector4;\r\nimport RenderState = Laya.RenderState;\r\nimport Scene3DShaderDeclaration = Laya.Scene3DShaderDeclaration;\r\nimport BaseTexture = Laya.BaseTexture;\r\nimport Material = Laya.Material;\r\nimport { GPUSkinningBaseMaterial } from \"./GPUSkinningBaseMaterial\";\r\nimport GPUSkiningVertexMesh from \"../Mesh/GPUSkiningVertexMesh\";\r\n\r\n\r\n\r\nexport class GPUSkinningUnlitMaterial extends GPUSkinningBaseMaterial\r\n{\r\n    \r\n    /** Shader名称 */\r\n    public static shaderName = \"GPUSkinningUnlit\";\r\n\r\n\tprivate static _isInstalled: boolean = false;\r\n    public static async install()\r\n    {\r\n\t\tif(this._isInstalled)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._isInstalled = true;\r\n        GPUSkinningUnlitMaterial.__initDefine__();\r\n        await GPUSkinningUnlitMaterial.initShader();\r\n\r\n        GPUSkinningUnlitMaterial.defaultMaterial = new GPUSkinningUnlitMaterial();\r\n        GPUSkinningUnlitMaterial.defaultMaterial.lock = true;\r\n    }\r\n\r\n    private static async initShader()\r\n    {\r\n        var vs: string = await GPUSkinningUnlitMaterial.loadShaderVSAsync(GPUSkinningUnlitMaterial.shaderName);\r\n        var ps: string = await GPUSkinningUnlitMaterial.loadShaderPSAsync(GPUSkinningUnlitMaterial.shaderName);\r\n        \r\n        \r\n        var attributeMap: object;\r\n        var uniformMap: object;\r\n        var stateMap: object;\r\n        var shader:Shader3D;\r\n        var subShader:SubShader;\r\n\r\n        attributeMap = \r\n        {\r\n\t\t\t'a_Position': VertexMesh.MESH_POSITION0,\r\n\t\t\t'a_Color': VertexMesh.MESH_COLOR0,\r\n\t\t\t'a_Texcoord0': VertexMesh.MESH_TEXTURECOORDINATE0,\r\n\t\t\t'a_Texcoord1': VertexMesh.MESH_TEXTURECOORDINATE1,\r\n\t\t\t'a_Texcoord2': GPUSkiningVertexMesh.MESH_TEXTURECOORDINATE2,\r\n\t\t\t'a_MvpMatrix': VertexMesh.MESH_MVPMATRIX_ROW0\r\n\t\t};\r\n\r\n        uniformMap = \r\n        {\r\n\t\t\t'u_GPUSkinning_TextureMatrix': Shader3D.PERIOD_MATERIAL,\r\n\t\t\t'u_GPUSkinning_TextureSize_NumPixelsPerFrame': Shader3D.PERIOD_MATERIAL,\r\n\t\t\t'u_GPUSkinning_FrameIndex_PixelSegmentation': Shader3D.PERIOD_MATERIAL,\r\n\t\t\t'u_GPUSkinning_FrameIndex_PixelSegmentation_Blend_CrossFade': Shader3D.PERIOD_MATERIAL,\r\n\t\t\t'u_GPUSkinning_RootMotion': Shader3D.PERIOD_MATERIAL,\r\n\t\t\t'u_GPUSkinning_RootMotion_CrossFade': Shader3D.PERIOD_MATERIAL,\r\n\t\t\t\r\n\t\t\t'u_AlbedoTexture': Shader3D.PERIOD_MATERIAL,\r\n\t\t\t'u_AlbedoColor': Shader3D.PERIOD_MATERIAL,\r\n\t\t\t'u_TilingOffset': Shader3D.PERIOD_MATERIAL,\r\n            'u_AlphaTestValue': Shader3D.PERIOD_MATERIAL,\r\n            \r\n            'u_MvpMatrix': Shader3D.PERIOD_SPRITE,\r\n            \r\n\t\t\t'u_FogStart': Shader3D.PERIOD_SCENE,\r\n\t\t\t'u_FogRange': Shader3D.PERIOD_SCENE,\r\n\t\t\t'u_FogColor': Shader3D.PERIOD_SCENE\r\n\t\t};\r\n\r\n        stateMap = \r\n        {\r\n\t\t\t's_Cull': Shader3D.RENDER_STATE_CULL,\r\n\t\t\t's_Blend': Shader3D.RENDER_STATE_BLEND,\r\n\t\t\t's_BlendSrc': Shader3D.RENDER_STATE_BLEND_SRC,\r\n\t\t\t's_BlendDst': Shader3D.RENDER_STATE_BLEND_DST,\r\n\t\t\t's_DepthTest': Shader3D.RENDER_STATE_DEPTH_TEST,\r\n\t\t\t's_DepthWrite': Shader3D.RENDER_STATE_DEPTH_WRITE\r\n\t\t};\r\n\r\n        \r\n        shader = Shader3D.add(GPUSkinningUnlitMaterial.shaderName, null, null, true);\r\n        subShader =  new SubShader(attributeMap, uniformMap);\r\n        shader.addSubShader(subShader);\r\n        \r\n\r\n        var mainPass =  subShader.addShaderPass(vs, ps, stateMap);\r\n        // mainPass.renderState.cull = Laya.RenderState.CULL_BACK;\r\n        \r\n        \r\n    }\r\n\r\n\t\r\n\t/**渲染状态_不透明。*/\r\n\tstatic RENDERMODE_OPAQUE: number = 0;\r\n\t/**渲染状态_阿尔法测试。*/\r\n\tstatic RENDERMODE_CUTOUT: number = 1;\r\n\t/**渲染状态__透明混合。*/\r\n\tstatic RENDERMODE_TRANSPARENT: number = 2;\r\n\t/**渲染状态__加色法混合。*/\r\n\tstatic RENDERMODE_ADDTIVE: number = 3;\r\n\r\n\tstatic SHADERDEFINE_ALBEDOTEXTURE: ShaderDefine;\r\n\tstatic SHADERDEFINE_TILINGOFFSET: ShaderDefine;\r\n\tstatic SHADERDEFINE_ENABLEVERTEXCOLOR: ShaderDefine;\r\n\r\n\tstatic ALBEDOTEXTURE: number = Shader3D.propertyNameToID(\"u_AlbedoTexture\");\r\n\tstatic ALBEDOCOLOR: number = Shader3D.propertyNameToID(\"u_AlbedoColor\");\r\n\tstatic TILINGOFFSET: number = Shader3D.propertyNameToID(\"u_TilingOffset\");\r\n\tstatic CULL: number = Shader3D.propertyNameToID(\"s_Cull\");\r\n\tstatic BLEND: number = Shader3D.propertyNameToID(\"s_Blend\");\r\n\tstatic BLEND_SRC: number = Shader3D.propertyNameToID(\"s_BlendSrc\");\r\n\tstatic BLEND_DST: number = Shader3D.propertyNameToID(\"s_BlendDst\");\r\n\tstatic DEPTH_TEST: number = Shader3D.propertyNameToID(\"s_DepthTest\");\r\n\tstatic DEPTH_WRITE: number = Shader3D.propertyNameToID(\"s_DepthWrite\");\r\n\r\n\t/** 默认材质，禁止修改*/\r\n\tstatic defaultMaterial: GPUSkinningUnlitMaterial;\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tstatic __initDefine__(): void {\r\n\t\tGPUSkinningUnlitMaterial.SHADERDEFINE_ALBEDOTEXTURE = Shader3D.getDefineByName(\"ALBEDOTEXTURE\");\r\n\t\tGPUSkinningUnlitMaterial.SHADERDEFINE_TILINGOFFSET = Shader3D.getDefineByName(\"TILINGOFFSET\");\r\n\t\tGPUSkinningUnlitMaterial.SHADERDEFINE_ENABLEVERTEXCOLOR = Shader3D.getDefineByName(\"ENABLEVERTEXCOLOR\");\r\n\t}\r\n\r\n\tprivate _albedoColor: Vector4 = new Vector4(1.0, 1.0, 1.0, 1.0);\r\n\tprivate _albedoIntensity: number = 1.0;\r\n\tprivate _enableVertexColor: boolean = false;\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tget _ColorR(): number {\r\n\t\treturn this._albedoColor.x;\r\n\t}\r\n\r\n\tset _ColorR(value: number) {\r\n\t\tthis._albedoColor.x = value;\r\n\t\tthis.albedoColor = this._albedoColor;\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tget _ColorG(): number {\r\n\t\treturn this._albedoColor.y;\r\n\t}\r\n\r\n\tset _ColorG(value: number) {\r\n\t\tthis._albedoColor.y = value;\r\n\t\tthis.albedoColor = this._albedoColor;\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tget _ColorB(): number {\r\n\t\treturn this._albedoColor.z;\r\n\t}\r\n\r\n\tset _ColorB(value: number) {\r\n\t\tthis._albedoColor.z = value;\r\n\t\tthis.albedoColor = this._albedoColor;\r\n\t}\r\n\r\n\t/**\r\n\t * @internal \r\n\t */\r\n\tget _ColorA(): number {\r\n\t\treturn this._albedoColor.w;\r\n\t}\r\n\r\n\tset _ColorA(value: number) {\r\n\t\tthis._albedoColor.w = value;\r\n\t\tthis.albedoColor = this._albedoColor;\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tget _AlbedoIntensity(): number {\r\n\t\treturn this._albedoIntensity;\r\n\t}\r\n\r\n\tset _AlbedoIntensity(value: number) {\r\n\t\tif (this._albedoIntensity !== value) {\r\n\t\t\tvar finalAlbedo: Vector4 = (<Vector4>this._shaderValues.getVector(GPUSkinningUnlitMaterial.ALBEDOCOLOR));\r\n\t\t\tVector4.scale(this._albedoColor, value, finalAlbedo);\r\n\t\t\tthis._albedoIntensity = value;\r\n\t\t\tthis._shaderValues.setVector(GPUSkinningUnlitMaterial.ALBEDOCOLOR, finalAlbedo);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tget _MainTex_STX(): number {\r\n\t\treturn this._shaderValues.getVector(GPUSkinningUnlitMaterial.TILINGOFFSET).x;\r\n\t}\r\n\r\n\tset _MainTex_STX(x: number) {\r\n\t\tvar tilOff: Vector4 = (<Vector4>this._shaderValues.getVector(GPUSkinningUnlitMaterial.TILINGOFFSET));\r\n\t\ttilOff.x = x;\r\n\t\tthis.tilingOffset = tilOff;\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tget _MainTex_STY(): number {\r\n\t\treturn this._shaderValues.getVector(GPUSkinningUnlitMaterial.TILINGOFFSET).y;\r\n\t}\r\n\r\n\tset _MainTex_STY(y: number) {\r\n\t\tvar tilOff: Vector4 = (<Vector4>this._shaderValues.getVector(GPUSkinningUnlitMaterial.TILINGOFFSET));\r\n\t\ttilOff.y = y;\r\n\t\tthis.tilingOffset = tilOff;\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tget _MainTex_STZ(): number {\r\n\t\treturn this._shaderValues.getVector(GPUSkinningUnlitMaterial.TILINGOFFSET).z;\r\n\t}\r\n\r\n\tset _MainTex_STZ(z: number) {\r\n\t\tvar tilOff: Vector4 = (<Vector4>this._shaderValues.getVector(GPUSkinningUnlitMaterial.TILINGOFFSET));\r\n\t\ttilOff.z = z;\r\n\t\tthis.tilingOffset = tilOff;\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tget _MainTex_STW(): number {\r\n\t\treturn this._shaderValues.getVector(GPUSkinningUnlitMaterial.TILINGOFFSET).w;\r\n\t}\r\n\r\n\tset _MainTex_STW(w: number) {\r\n\t\tvar tilOff: Vector4 = (<Vector4>this._shaderValues.getVector(GPUSkinningUnlitMaterial.TILINGOFFSET));\r\n\t\ttilOff.w = w;\r\n\t\tthis.tilingOffset = tilOff;\r\n\t}\r\n\r\n\t/**\r\n\t * @internal\r\n\t */\r\n\tget _Cutoff(): number {\r\n\t\treturn this.alphaTestValue;\r\n\t}\r\n\r\n\tset _Cutoff(value: number) {\r\n\t\tthis.alphaTestValue = value;\r\n\t}\r\n\r\n\t/**\r\n\t * 反照率颜色R分量。\r\n\t */\r\n\tget albedoColorR(): number {\r\n\t\treturn this._ColorR;\r\n\t}\r\n\r\n\tset albedoColorR(value: number) {\r\n\t\tthis._ColorR = value;\r\n\t}\r\n\r\n\t/**\r\n\t * 反照率颜色G分量。\r\n\t */\r\n\tget albedoColorG(): number {\r\n\t\treturn this._ColorG;\r\n\t}\r\n\r\n\tset albedoColorG(value: number) {\r\n\t\tthis._ColorG = value;\r\n\t}\r\n\r\n\t/**\r\n\t * 反照率颜色B分量。\r\n\t */\r\n\tget albedoColorB(): number {\r\n\t\treturn this._ColorB;\r\n\t}\r\n\r\n\tset albedoColorB(value: number) {\r\n\t\tthis._ColorB = value;\r\n\t}\r\n\r\n\t/**\r\n\t * 反照率颜色Z分量。\r\n\t */\r\n\tget albedoColorA(): number {\r\n\t\treturn this._ColorA;\r\n\t}\r\n\r\n\tset albedoColorA(value: number) {\r\n\t\tthis._ColorA = value;\r\n\t}\r\n\r\n\t/**\r\n\t * 反照率颜色。\r\n\t */\r\n\tget albedoColor(): Vector4 {\r\n\t\treturn this._albedoColor;\r\n\t}\r\n\r\n\tset albedoColor(value: Vector4) {\r\n\t\tvar finalAlbedo: Vector4 = (<Vector4>this._shaderValues.getVector(GPUSkinningUnlitMaterial.ALBEDOCOLOR));\r\n\t\tVector4.scale(value, this._albedoIntensity, finalAlbedo);\r\n\t\tthis._albedoColor = value;\r\n\t\tthis._shaderValues.setVector(GPUSkinningUnlitMaterial.ALBEDOCOLOR, finalAlbedo);\r\n\t}\r\n\r\n\t/**\r\n\t * 反照率强度。\r\n\t */\r\n\tget albedoIntensity(): number {\r\n\t\treturn this._albedoIntensity;\r\n\t}\r\n\r\n\tset albedoIntensity(value: number) {\r\n\t\tthis._AlbedoIntensity = value;\r\n\t}\r\n\r\n\t/**\r\n\t * 反照率贴图。\r\n\t */\r\n\tget albedoTexture(): BaseTexture {\r\n\t\treturn this._shaderValues.getTexture(GPUSkinningUnlitMaterial.ALBEDOTEXTURE);\r\n\t}\r\n\r\n\tset albedoTexture(value: BaseTexture) {\r\n\t\tif (value)\r\n\t\t\tthis._shaderValues.addDefine(GPUSkinningUnlitMaterial.SHADERDEFINE_ALBEDOTEXTURE);\r\n\t\telse\r\n\t\t\tthis._shaderValues.removeDefine(GPUSkinningUnlitMaterial.SHADERDEFINE_ALBEDOTEXTURE);\r\n\t\tthis._shaderValues.setTexture(GPUSkinningUnlitMaterial.ALBEDOTEXTURE, value);\r\n\t}\r\n\r\n\t/**\r\n\t * 纹理平铺和偏移X分量。\r\n\t */\r\n\tget tilingOffsetX(): number {\r\n\t\treturn this._MainTex_STX;\r\n\t}\r\n\r\n\tset tilingOffsetX(x: number) {\r\n\t\tthis._MainTex_STX = x;\r\n\t}\r\n\r\n\t/**\r\n\t * 纹理平铺和偏移Y分量。\r\n\t */\r\n\tget tilingOffsetY(): number {\r\n\t\treturn this._MainTex_STY;\r\n\t}\r\n\r\n\tset tilingOffsetY(y: number) {\r\n\t\tthis._MainTex_STY = y;\r\n\t}\r\n\r\n\t/**\r\n\t * 纹理平铺和偏移Z分量。\r\n\t */\r\n\tget tilingOffsetZ(): number {\r\n\t\treturn this._MainTex_STZ;\r\n\t}\r\n\r\n\tset tilingOffsetZ(z: number) {\r\n\t\tthis._MainTex_STZ = z;\r\n\t}\r\n\r\n\t/**\r\n\t * 纹理平铺和偏移W分量。\r\n\t */\r\n\tget tilingOffsetW(): number {\r\n\t\treturn this._MainTex_STW;\r\n\t}\r\n\r\n\tset tilingOffsetW(w: number) {\r\n\t\tthis._MainTex_STW = w;\r\n\t}\r\n\r\n\t/**\r\n\t * 纹理平铺和偏移。\r\n\t */\r\n\tget tilingOffset(): Vector4 {\r\n\t\treturn (<Vector4>this._shaderValues.getVector(GPUSkinningUnlitMaterial.TILINGOFFSET));\r\n\t}\r\n\r\n\tset tilingOffset(value: Vector4) {\r\n\t\tif (value) {\r\n\t\t\tif (value.x != 1 || value.y != 1 || value.z != 0 || value.w != 0)\r\n\t\t\t\tthis._shaderValues.addDefine(GPUSkinningUnlitMaterial.SHADERDEFINE_TILINGOFFSET);\r\n\t\t\telse\r\n\t\t\t\tthis._shaderValues.removeDefine(GPUSkinningUnlitMaterial.SHADERDEFINE_TILINGOFFSET);\r\n\t\t} else {\r\n\t\t\tthis._shaderValues.removeDefine(GPUSkinningUnlitMaterial.SHADERDEFINE_TILINGOFFSET);\r\n\t\t}\r\n\t\tthis._shaderValues.setVector(GPUSkinningUnlitMaterial.TILINGOFFSET, value);\r\n\t}\r\n\r\n\t/**\r\n\t * 是否支持顶点色。\r\n\t */\r\n\tget enableVertexColor(): boolean {\r\n\t\treturn this._enableVertexColor;\r\n\t}\r\n\r\n\tset enableVertexColor(value: boolean) {\r\n\t\tthis._enableVertexColor = value;\r\n\t\tif (value)\r\n\t\t\tthis._shaderValues.addDefine(GPUSkinningUnlitMaterial.SHADERDEFINE_ENABLEVERTEXCOLOR);\r\n\t\telse\r\n\t\t\tthis._shaderValues.removeDefine(GPUSkinningUnlitMaterial.SHADERDEFINE_ENABLEVERTEXCOLOR);\r\n\t}\r\n\r\n\t/**\r\n\t * 渲染模式。\r\n\t */\r\n\tset renderMode(value: number) {\r\n\t\tswitch (value) {\r\n\t\t\tcase GPUSkinningUnlitMaterial.RENDERMODE_OPAQUE:\r\n\t\t\t\tthis.alphaTest = false;\r\n\t\t\t\tthis.renderQueue = Material.RENDERQUEUE_OPAQUE;\r\n\t\t\t\tthis.depthWrite = true;\r\n\t\t\t\tthis.cull = RenderState.CULL_FRONT;\r\n\t\t\t\tthis.blend = RenderState.BLEND_DISABLE;\r\n\t\t\t\tthis.depthTest = RenderState.DEPTHTEST_LESS;\r\n\t\t\t\tbreak;\r\n\t\t\tcase GPUSkinningUnlitMaterial.RENDERMODE_CUTOUT:\r\n\t\t\t\tthis.renderQueue = Material.RENDERQUEUE_ALPHATEST;\r\n\t\t\t\tthis.alphaTest = true;\r\n\t\t\t\tthis.depthWrite = true;\r\n\t\t\t\tthis.cull = RenderState.CULL_FRONT;\r\n\t\t\t\tthis.blend = RenderState.BLEND_DISABLE;\r\n\t\t\t\tthis.depthTest = RenderState.DEPTHTEST_LESS;\r\n\t\t\t\tbreak;\r\n\t\t\tcase GPUSkinningUnlitMaterial.RENDERMODE_TRANSPARENT:\r\n\t\t\t\tthis.renderQueue = Material.RENDERQUEUE_TRANSPARENT;\r\n\t\t\t\tthis.alphaTest = false;\r\n\t\t\t\tthis.depthWrite = false;\r\n\t\t\t\tthis.cull = RenderState.CULL_FRONT;\r\n\t\t\t\tthis.blend = RenderState.BLEND_ENABLE_ALL;\r\n\t\t\t\tthis.blendSrc = RenderState.BLENDPARAM_SRC_ALPHA;\r\n\t\t\t\tthis.blendDst = RenderState.BLENDPARAM_ONE_MINUS_SRC_ALPHA;\r\n\t\t\t\tthis.depthTest = RenderState.DEPTHTEST_LESS;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"GPUSkinningUnlitMaterial : renderMode value error.\");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * 是否写入深度。\r\n\t */\r\n\tget depthWrite(): boolean {\r\n\t\treturn this._shaderValues.getBool(GPUSkinningUnlitMaterial.DEPTH_WRITE);\r\n\t}\r\n\r\n\tset depthWrite(value: boolean) {\r\n\t\tthis._shaderValues.setBool(GPUSkinningUnlitMaterial.DEPTH_WRITE, value);\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * 剔除方式。\r\n\t */\r\n\tget cull(): number {\r\n\t\treturn this._shaderValues.getInt(GPUSkinningUnlitMaterial.CULL);\r\n\t}\r\n\r\n\tset cull(value: number) {\r\n\t\tthis._shaderValues.setInt(GPUSkinningUnlitMaterial.CULL, value);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 混合方式。\r\n\t */\r\n\tget blend(): number {\r\n\t\treturn this._shaderValues.getInt(GPUSkinningUnlitMaterial.BLEND);\r\n\t}\r\n\r\n\tset blend(value: number) {\r\n\t\tthis._shaderValues.setInt(GPUSkinningUnlitMaterial.BLEND, value);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 混合源。\r\n\t */\r\n\tget blendSrc(): number {\r\n\t\treturn this._shaderValues.getInt(GPUSkinningUnlitMaterial.BLEND_SRC);\r\n\t}\r\n\r\n\tset blendSrc(value: number) {\r\n\t\tthis._shaderValues.setInt(GPUSkinningUnlitMaterial.BLEND_SRC, value);\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * 混合目标。\r\n\t */\r\n\tget blendDst(): number {\r\n\t\treturn this._shaderValues.getInt(GPUSkinningUnlitMaterial.BLEND_DST);\r\n\t}\r\n\r\n\tset blendDst(value: number) {\r\n\t\tthis._shaderValues.setInt(GPUSkinningUnlitMaterial.BLEND_DST, value);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 深度测试方式。\r\n\t */\r\n\tget depthTest(): number {\r\n\t\treturn this._shaderValues.getInt(GPUSkinningUnlitMaterial.DEPTH_TEST);\r\n\t}\r\n\r\n\tset depthTest(value: number) {\r\n\t\tthis._shaderValues.setInt(GPUSkinningUnlitMaterial.DEPTH_TEST, value);\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.setShaderName(GPUSkinningUnlitMaterial.shaderName);\r\n\t\tthis._shaderValues.setVector(GPUSkinningUnlitMaterial.ALBEDOCOLOR, new Vector4(1.0, 1.0, 1.0, 1.0));\r\n\t\tthis.renderMode = GPUSkinningUnlitMaterial.RENDERMODE_OPAQUE;\r\n\r\n\t\t// this._shaderValues.addDefine(Shader3D.getDefineByName(\"SKIN_4\"));\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * 克隆。\r\n\t * @return\t 克隆副本。\r\n\t * @override\r\n\t */\r\n\tclone(): any {\r\n\t\tvar dest: GPUSkinningUnlitMaterial = new GPUSkinningUnlitMaterial();\r\n\t\tthis.cloneTo(dest);\r\n\t\treturn dest;\r\n\t}\r\n\r\n}","export default class LayaUtil\n{\n    static GetComponentsInChildren<T>(go:Laya.Node, componentType: typeof Laya.Component, outComponents?:T[]): T[]\n    {\n        if(!outComponents)\n        {\n            outComponents = [];\n        }\n\n        for(let i = 0, len = go.numChildren; i < len; i ++)\n        {\n            let child = go.getChildAt(i);\n            let component = child.getComponent(componentType);\n            if(component)\n            {\n                outComponents.push(component);\n            }\n\n            this.GetComponentsInChildren(child, componentType, outComponents);\n        }\n\n        return outComponents;\n    }\n}","import LayaUtil from \"./LayaUtil\";\n\nexport default class LayaExtends_Node\n{\n    private static isInited = false;\n    static Init()\n    {\n        if(this.isInited)\n            return;\n\n        this.isInited = true;\n        new LayaExtends_Node();\n    }\n\n\n    constructor()\n    {\n        Laya.Node.prototype.getComponentsInChildren = this.getComponentsInChildren;\n    }\n\n    \n    getComponentsInChildren<T>(componentType: typeof Laya.Component, outComponents?:T[]): T[]\n    {\n        if(outComponents)\n        {\n            outComponents.length = 0;\n        }\n        else\n        {\n            outComponents = [];\n        }\n        LayaUtil.GetComponentsInChildren(<any>this, componentType, outComponents);\n        return outComponents;\n    }\n\n\n}\n","import LayaGL = Laya.LayaGL;\r\nimport WebGLContext = Laya.WebGLContext;\r\nimport TextureFormat = Laya.TextureFormat;\r\nexport default class LayaExtends_Texture2D\r\n{\r\n    private static isInited = false;\r\n    static Init()\r\n    {\r\n        if(this.isInited)\r\n            return;\r\n\r\n        this.isInited = true;\r\n        new LayaExtends_Texture2D();\r\n    }\r\n\r\n\r\n    constructor()\r\n    {\r\n        Laya.Texture2D.prototype.setFloatPixels = this.setFloatPixels;\r\n        Laya.Texture2D.prototype._setFloatPixels = this._setFloatPixels;\r\n    }\r\n\r\n    /**\r\n\t * 通过像素填充纹理。\r\n\t * @param\tpixels 像素。\r\n\t * @param   miplevel 层级。\r\n\t */\r\n    setFloatPixels(pixels: Uint8Array | Float32Array, miplevel: number = 0): void \r\n    {\r\n\t\tif (this._gpuCompressFormat())\r\n\t\t\tthrow \"Texture2D:the format is GPU compression format.\";\r\n\t\tif (!pixels)\r\n\t\t\tthrow \"Texture2D:pixels can't be null.\";\r\n\t\tvar width: number = Math.max(this._width >> miplevel, 1);\r\n\t\tvar height: number = Math.max(this._height >> miplevel, 1);\r\n\t\tvar pixelsCount: number = width * height * this._getFormatByteCount();\r\n\t\tif (pixels.length < pixelsCount)\r\n\t\t\tthrow \"Texture2D:pixels length should at least \" + pixelsCount + \".\";\r\n\t\tthis._setFloatPixels(pixels, miplevel, width, height);\r\n\r\n\t\tif (this._canRead)\r\n\t\t\tthis._pixels = pixels;\r\n\r\n\t\tthis._readyed = true;\r\n\t\tthis._activeResource();\r\n    }\r\n    \r\n\t/**\r\n\t * @internal\r\n\t */\r\n\t_setFloatPixels(pixels: Float32Array, miplevel: number, width: number, height: number): void {\r\n        var gl: WebGLRenderingContext = LayaGL.instance;\r\n        \r\n        var halfFloat = gl.getExtension('OES_texture_half_float');\r\n        gl.getExtension('OES_texture_half_float_linear');\r\n        \r\n\t\tvar textureType: number = this._glTextureType;\r\n\t\tvar glFormat: number = this._getGLFormat();\r\n        WebGLContext.bindTexture(gl, textureType, this._glTexture);\r\n\r\n        gl.texParameterf(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n        gl.texImage2D(textureType, miplevel, gl.RGBA, width, height, 0, glFormat, halfFloat.HALF_FLOAT_OES, pixels);\r\n\r\n\t}\r\n\r\n}\r\n","import GPUSkiningMesh from \"./Mesh/GPUSkiningMesh\";\r\n\r\nimport LoaderManager = Laya.LoaderManager;\r\nimport Loader = Laya.Loader;\r\nimport Event = Laya.Event;\r\nimport Shader3D = Laya.Shader3D;\r\nimport HalfFloatUtils = Laya.HalfFloatUtils;\r\nimport Laya3D_Extend from \"./Mesh/Laya3D_Extend\";\r\nimport GPUSkinningAnimation from \"./Datas/GPUSkinningAnimation\";\r\nimport GPUSkinningPlayerMono from \"./GPUSkinningPlayerMono\";\r\nimport { GPUSkinningBaseMaterial } from \"./Material/GPUSkinningBaseMaterial\";\r\nimport { GPUSkinningUnlitMaterial } from \"./Material/GPUSkinningUnlitMaterial\";\r\nimport LayaExtends_Node from \"../LayaExtends/LayaExtends_Node\";\r\nimport LayaExtends_Texture2D from \"../LayaExtends/LayaExtends_Texture2D\";\r\nexport default class GPUSkining\r\n{\r\n    static EXT_SKING_MESH = \"skinlm\";\r\n\r\n    static async InitAsync()\r\n    {\r\n      \r\n      var GPUSkinningIncludegGLSL: string = await GPUSkinningBaseMaterial.loadShaderGlslAsync(\"GPUSkinningInclude\");\r\n      Shader3D.addInclude(\"GPUSkinningInclude.glsl\", GPUSkinningIncludegGLSL);\r\n\r\n      GPUSkinningBaseMaterial.__initDefine__();\r\n      await GPUSkinningUnlitMaterial.install();\r\n      \r\n\r\n\r\n      LayaExtends_Node.Init();\r\n      LayaExtends_Texture2D.Init();\r\n      Laya3D_Extend.Init();\r\n\r\n      Laya3D.SKING_MESH = \"SKING_MESH\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n      var createMap: any = LoaderManager.createMap;\r\n      createMap[\"skinlm\"] = [Laya3D.SKING_MESH, GPUSkiningMesh._parse];\r\n\r\n      \r\n      var parserMap: any = Loader.parserMap;\r\n      parserMap[Laya3D.SKING_MESH] = this._loadMesh;\r\n        \r\n    }\r\n\r\n    private static _loadMesh(loader: Loader): void \r\n    {\r\n      loader.on(Event.LOADED, null, this._onMeshLmLoaded, [loader]);\r\n      loader.load(loader.url, Loader.BUFFER, false, null, true);\r\n    }\r\n\r\n    static _onMeshLmLoaded(loader: Loader, lmData: ArrayBuffer): void \r\n    {\r\n      loader._cache = loader._createCache;\r\n      var mesh: GPUSkiningMesh = GPUSkiningMesh._parse(lmData, loader._propertyParams, loader._constructParams);\r\n      Laya3D._endLoad(loader, mesh);\r\n    }\r\n    \r\n\r\n\r\n    static resRoot = \"res/gpuskining/\";\r\n    static GetAnimName(name: string): string\r\n    {\r\n      return `GPUSKinning_Anim_${name}.skinlani`;\r\n    }\r\n\r\n    static GetMeshName(name: string): string\r\n    {\r\n      return `GPUSKinning_Mesh_${name}.skinlm`;\r\n    }\r\n    \r\n    static GetTextureName(name: string): string\r\n    {\r\n      return `GPUSKinning_Laya_Texture_${name}.bytes`;\r\n    }\r\n\r\n    static GetPath(name: string)\r\n    {\r\n      return this.resRoot + name;\r\n    }\r\n\r\n    \r\n\tstatic LoadAnimTextureAsync(path: string, width: int, height:int): Promise<any>\r\n\t{\r\n    WebGLRenderingContext\r\n\t\treturn new  Promise<any>((resolve)=>\r\n\t\t{\r\n\t\t\tLaya.loader.load(path, Laya.Handler.create(this, (arrayBuffer:ArrayBuffer)=>\r\n\t\t\t{\r\n        var i8 = new Uint8Array(arrayBuffer);\r\n        // var texture: Laya.Texture2D = new Laya.Texture2D(width, height, Laya.TextureFormat.R8G8B8A8, false, true);\r\n        // texture.setPixels(i8);\r\n        // var i16 = new Uint16Array(arrayBuffer);\r\n        // var count = arrayBuffer.byteLength / 2;\r\n        // var f32 = new Float32Array(count);\r\n        // // var reader = new Laya.Byte(arrayBuffer);\r\n        // for(var i = 0; i < i16.length; i++)\r\n        // {\r\n        //   // f32[i] =  HalfFloatUtils.convertToNumber(reader.getUint16());\r\n        //   i16[i] = 1;\r\n        // }\r\n        \r\n\r\n        // var gl = Laya.LayaGL.instance;\r\n        // var ext = gl.getExtension('OES_texture_float');\r\n        // gl.getExtension('EXT_shader_texture_lod');\r\n        var texture: Laya.Texture2D = new Laya.Texture2D(width, height, Laya.TextureFormat.R8G8B8A8, false, true);\r\n        texture.wrapModeU = Laya.BaseTexture.WARPMODE_CLAMP;\r\n        texture.wrapModeV = Laya.BaseTexture.WARPMODE_CLAMP;\r\n        texture.filterMode = Laya.BaseTexture.FILTERMODE_POINT;\r\n        texture.setPixels(<any>i8);\r\n        \r\n        window['animBuffer'] = arrayBuffer;\r\n        window['animTexture'] = texture;\r\n        resolve(texture);\r\n\r\n\t\t\t}), null, Laya.Loader.BUFFER);\r\n\t\t});\r\n\t}\r\n    \r\n\tstatic LoadAsync(path: string, type?:string): Promise<any>\r\n\t{\r\n\t\treturn new  Promise<any>((resolve)=>\r\n\t\t{\r\n\t\t\tLaya.loader.load(path, Laya.Handler.create(this, (data:any)=>\r\n\t\t\t{\r\n        resolve(data);\r\n\r\n\t\t\t}), null, type);\r\n\t\t});\r\n\t}\r\n\r\n    static async CreateByNameAsync(name: string, mainTexturePath: string, materialCls?: any): Promise<GPUSkinningPlayerMono>\r\n    {\r\n      if(!materialCls)\r\n      {\r\n        materialCls = GPUSkinningUnlitMaterial;\r\n      }\r\n      var animPath: string = this.GetPath(this.GetAnimName(name));\r\n      var meshPath: string = this.GetPath(this.GetMeshName(name));\r\n      var texturePath: string = this.GetPath(this.GetTextureName(name));\r\n\r\n      var anim = await GPUSkinningAnimation.LoadAsync(animPath);\r\n      window['anim'] = anim;\r\n      console.log(anim);\r\n\r\n      var mesh = await GPUSkiningMesh.LoadAsync(meshPath);\r\n      var mainTexture:Laya.Texture2D = await this.LoadAsync(mainTexturePath, Laya.Loader.TEXTURE2D);\r\n      // console.log(mainTexture);\r\n      // console.log(mesh);\r\n      var animTexture = await this.LoadAnimTextureAsync(texturePath, anim.textureWidth, anim.textureHeight);\r\n      console.log(animTexture);\r\n      var material:GPUSkinningUnlitMaterial = new materialCls();\r\n      material.albedoTexture = mainTexture;\r\n      material.GPUSkinning_TextureMatrix = animTexture;\r\n      // console.log(material);\r\n\r\n      var mat:Laya.UnlitMaterial = window['planemat'];\r\n      if(mat)mat.albedoTexture = animTexture;\r\n\r\n      var sprite = new Laya.MeshSprite3D();\r\n      var mono: GPUSkinningPlayerMono = sprite.addComponent(GPUSkinningPlayerMono);\r\n      mono.SetData(anim, mesh, material, animTexture);\r\n      window['mono'] = mono;\r\n      console.log(mono);\r\n      mono.Player.Play(\"IDLE\");\r\n\r\n      return mono;\r\n    }\r\n\r\n\r\n}","import { TestScene } from \"./TestSene\";\r\nimport MaterialInstall from \"../Materials/MaterialInstall\";\r\nimport { Cartoon2Material } from \"../Materials/Cartoon2Material\";\r\nimport GPUSkinningPlayerMono from \"../GPUSkinning/GPUSkinningPlayerMono\";\r\nimport GPUSkinningAnimation from \"../GPUSkinning/Datas/GPUSkinningAnimation\";\r\n\r\nimport Mesh = Laya.Mesh;\r\nimport Material = Laya.Material;\r\nimport Texture2D = Laya.Texture2D;\r\nimport GPUSkining from \"../GPUSkinning/GPUSkining\";\r\nimport { GPUSkinningUnlitMaterial } from \"../GPUSkinning/Material/GPUSkinningUnlitMaterial\";\r\n\r\n\r\nexport default class TestShader\r\n{\r\n    scene: TestScene;\r\n    constructor()\r\n    {\r\n        this.scene = TestScene.create();\r\n        Laya.stage.addChild(this.scene);\r\n        // this.loadPrefab();\r\n        this.InitAsync();\r\n    }\r\n\r\n    async InitAsync()\r\n    {\r\n        \r\n\t\tawait GPUSkining.InitAsync();\r\n\t\t// 初始化shader\r\n        await MaterialInstall.install();\r\n        // this.TestPrefab();\r\n        // var plane2:Laya.MeshSprite3D = <any> this.scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createPlane(5, 5, 1,1)));\r\n        // plane2.transform.localRotationEulerX = 20;\r\n\r\n        // var plane:Laya.MeshSprite3D = <any> this.scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createPlane(5, 5, 1,1)));\r\n        // var mat = new Laya.UnlitMaterial();\r\n        // plane.transform.localRotationEulerX = 20;\r\n        // window['planemat'] = mat;\r\n        // window['plane'] = plane;\r\n\r\n        // // var texture =  await this.LoadAnimTextureAsync(\"res/gpuskining/rili.bytes\", 4, 4);\r\n        // // mat.albedoTexture = texture;\r\n        // plane.meshRenderer.sharedMaterial = mat;\r\n        // // return;\r\n\r\n\r\n        var mono = await GPUSkining.CreateByNameAsync(\"Hero_1001_Dianguanglongqi_Skin1\", \"res/gpuskining/Hero_1001_Dianguanglongqi.jpg\");\r\n        if(mono)\r\n        {\r\n            this.scene.addChild(mono.owner);\r\n\r\n            var sprite: Laya.MeshSprite3D = <Laya.MeshSprite3D> mono.owner;\r\n            window['sprite'] = sprite;\r\n            // sprite.transform.localRotationEulerX = -90;\r\n        }\r\n\r\n\r\n\r\n        // await this.TestLoadCube();\r\n    }\r\n\r\n    \r\n\tLoadAnimTextureAsync(path: string, width: int, height:int): Promise<any>\r\n\t{\r\n\t\treturn new  Promise<any>((resolve)=>\r\n\t\t{\r\n\t\t\tLaya.loader.load(path, Laya.Handler.create(this, (arrayBuffer:ArrayBuffer)=>\r\n\t\t\t{\r\n        var i8 = new Uint8Array(arrayBuffer);\r\n        // var texture: Laya.Texture2D = new Laya.Texture2D(width, height, Laya.TextureFormat.R8G8B8A8, false, true);\r\n        // texture.setPixels(i8);\r\n        // var i16 = new Uint16Array(arrayBuffer);\r\n        // var count = arrayBuffer.byteLength / 2;\r\n        // var f32 = new Float32Array(count);\r\n        // // var reader = new Laya.Byte(arrayBuffer);\r\n        // for(var i = 0; i < i16.length; i++)\r\n        // {\r\n        //   // f32[i] =  HalfFloatUtils.convertToNumber(reader.getUint16());\r\n        //   i16[i] = 1;\r\n        // }\r\n        \r\n\r\n        // var gl = Laya.LayaGL.instance;\r\n        // var ext = gl.getExtension('OES_texture_float');\r\n        // gl.getExtension('EXT_shader_texture_lod');\r\n        var texture: Laya.Texture2D = new Laya.Texture2D(width, height, Laya.TextureFormat.R8G8B8A8, false, true);\r\n        texture.wrapModeU = Laya.BaseTexture.WARPMODE_CLAMP;\r\n        texture.wrapModeV = Laya.BaseTexture.WARPMODE_CLAMP;\r\n        texture.filterMode = Laya.BaseTexture.FILTERMODE_POINT;\r\n        texture.setPixels(<any>i8);\r\n        \r\n        window['animBuffer2'] = arrayBuffer;\r\n        window['animTexture2'] = texture;\r\n        resolve(texture);\r\n\r\n\t\t\t}), null, Laya.Loader.BUFFER);\r\n\t\t});\r\n\t}\r\n\r\n    TestGPUSkining()\r\n    {\r\n        var anim: GPUSkinningAnimation, mesh: Mesh, mtrl: Material, textureRawData: Texture2D;\r\n\r\n        var sprite = new Laya.MeshSprite3D();\r\n        var mono: GPUSkinningPlayerMono = sprite.addComponent(GPUSkinningPlayerMono);\r\n        mono.SetData(anim, mesh, mtrl, textureRawData);\r\n    }\r\n\r\n    TestPrefab()\r\n    {\r\n        let box = new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(1, 1, 1));\r\n        box.transform.rotate(new Laya.Vector3(0, 45, 0), false, false);\r\n\r\n        var meshRenderer = box.meshRenderer;\r\n\r\n        \r\n        let material = new Cartoon2Material();\r\n        material.enableLighting = true;\r\n        meshRenderer.material = material;\r\n\r\n        this.scene.addChild(box);\r\n    }\r\n\r\n    async TestLoadCube()\r\n    {\r\n        \r\n        let prefabName = \"Cube\";\r\n        let path = this.GetPathByResId(prefabName);\r\n\r\n        let res:Laya.Sprite3D = await this.Load3DAsync(path);\r\n        res.transform.localRotationEulerX = -90;\r\n        this.scene.addChild(res);\r\n        res.transform.position = new Laya.Vector3(0, 0, 0);\r\n        window['res'] = res;\r\n    }\r\n\r\n    /** 3D资源根目录 */\r\n    static  Res3DRoot: string = \"res3d/Conventional/\";\r\n    \r\n    /** 获取资源路径 */\r\n    GetPathByResId(resId: string): string\r\n    {\r\n        return TestShader.Res3DRoot + resId + \".lh\";\r\n    }\r\n    \r\n    async loadPrefab()\r\n    {\r\n\t\t// 初始化shader\r\n        await MaterialInstall.install();\r\n        \r\n        let prefabName = \"Hero_1001_Dianguanglongqi_Skin1\";\r\n        let path = this.GetPathByResId(prefabName);\r\n\r\n        let res:Laya.Sprite3D = await this.Load3DAsync(path);\r\n\r\n        let node1 = this.createRole(res);\r\n        let node2 = this.createRole(res);\r\n\r\n        node2.transform.localPositionX = 2;\r\n        node2.transform.localScaleX = -1;\r\n\r\n        var modelNode1: Laya.Sprite3D = <Laya.Sprite3D> node1.getChildByName(\"model\");\r\n        var modelNode2: Laya.Sprite3D = <Laya.Sprite3D> node2.getChildByName(\"model\");\r\n        let animator1:Laya.Animator = modelNode1.getComponent(Laya.Animator);\r\n        let animator2:Laya.Animator = modelNode2.getComponent(Laya.Animator);\r\n\r\n        Laya.timer.loop(3000, this, ()=>{\r\n            animator1.play(Math.random() > 0.5 ? \"RUN\" : \"IDLE\");\r\n            modelNode1.transform.localScaleX *= -1;\r\n        });\r\n        \r\n        Laya.timer.loop(4000, this, ()=>{\r\n            modelNode2.transform.localScaleX *= -1;\r\n            animator2.play(Math.random() > 0.5 ? \"RUN\" : \"IDLE\");\r\n        });\r\n        \r\n    }\r\n\r\n    createRole(res:Laya.Sprite3D)\r\n    {\r\n        let node:Laya.Sprite3D = <Laya.Sprite3D> res.clone();\r\n        node.transform.position = new Laya.Vector3(0, 0, 0);\r\n        window['node'] = node;\r\n        \r\n        var modelNode: Laya.Sprite3D = <Laya.Sprite3D> node.getChildByName(\"model\");\r\n        let animator:Laya.Animator = modelNode.getComponent(Laya.Animator);\r\n\r\n        let skinnedMeshSprite3D:Laya.SkinnedMeshSprite3D = <Laya.SkinnedMeshSprite3D>(modelNode.getChildAt(1));\r\n        if(!(skinnedMeshSprite3D instanceof Laya.SkinnedMeshSprite3D))\r\n        {\r\n            skinnedMeshSprite3D = <Laya.SkinnedMeshSprite3D>(modelNode.getChildAt(0));\r\n        }\r\n        let meshRenderer = skinnedMeshSprite3D.skinnedMeshRenderer;\r\n        let unlitMaterial = <Laya.UnlitMaterial> meshRenderer.material;\r\n        // unlitMaterial.renderMode = UnlitMaterial.RENDERMODE_CUTOUT;\r\n\r\n        let material = new Cartoon2Material();\r\n        material.enableLighting = true;\r\n        material.albedoTexture = unlitMaterial.albedoTexture;\r\n        meshRenderer.material = material;\r\n\r\n        \r\n        this.scene.addChild(node);\r\n        animator.play(\"IDLE\");\r\n        return node;\r\n    }\r\n\r\n\r\n\r\n    \r\n\tasync Load3DAsync(path: string):Promise<any>\r\n\t{\r\n        return new Promise<any>((resolve)=>\r\n        {\r\n\t\t\tLaya.loader.create(path, Laya.Handler.create(null, (res)=>\r\n\t\t\t{\r\n                resolve(res);\r\n\t\t\t}));\r\n\t\t});\r\n    }\r\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport View=Laya.View;\r\nimport Dialog=Laya.Dialog;\r\nimport Scene=Laya.Scene;\nvar REG: Function = Laya.ClassUtils.regClass;\nexport module ui.test {\r\n    export class TestSceneUI extends Laya.Scene {\r\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.loadScene(\"test/TestScene\");\r\n        }\r\n    }\r\n    REG(\"ui.test.TestSceneUI\",TestSceneUI);\r\n}\r","import { ui } from \"./../ui/layaMaxUI\";\nimport GPUSkinningPlayerMono from \"../GPUSkinning/GPUSkinningPlayerMono\";\n/**\n * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联\n * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果\n * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。\n */\nexport default class GameUI extends ui.test.TestSceneUI {\n    constructor() {\n        super();\n\t\t\n        //添加3D场景\n        var scene: Laya.Scene3D = Laya.stage.addChild(new Laya.Scene3D()) as Laya.Scene3D;\n\n        //添加照相机\n        var camera: Laya.Camera = (scene.addChild(new Laya.Camera(0, 0.1, 100))) as Laya.Camera;\n        camera.transform.translate(new Laya.Vector3(0, 3, 3));\n        camera.transform.rotate(new Laya.Vector3(-30, 0, 0), true, false);\n        camera.addComponent(GPUSkinningPlayerMono);\n\n        //添加方向光\n        var directionLight: Laya.DirectionLight = scene.addChild(new Laya.DirectionLight()) as Laya.DirectionLight;\n        directionLight.color = new Laya.Vector3(0.6, 0.6, 0.6);\n        directionLight.transform.worldMatrix.setForward(new Laya.Vector3(1, -1, 0));\n\n        //添加自定义模型\n        var box: Laya.MeshSprite3D = scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(1, 1, 1))) as Laya.MeshSprite3D;\n        box.transform.rotate(new Laya.Vector3(0, 45, 0), false, false);\n        var material: Laya.BlinnPhongMaterial = new Laya.BlinnPhongMaterial();\n\t\tLaya.Texture2D.load(\"res/layabox.png\", Laya.Handler.create(null, function(tex:Laya.Texture2D) {\n\t\t\t\tmaterial.albedoTexture = tex;\n\t\t}));\n        box.meshRenderer.material = material;\n    }\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\r\nimport GameUI from \"./script/GameUI\"\r\n/*\r\n* 游戏初始化配置;\r\n*/\r\nexport default class GameConfig{\r\n    static width:number=1334;\r\n    static height:number=750;\r\n    static scaleMode:string= Laya.Stage.SCALE_NOSCALE;\r\n    static screenMode:string=\"none\";\r\n    static alignV:string=\"top\";\r\n    static alignH:string=\"left\";\r\n    static startScene:any=\"test/TestScene.scene\";\r\n    static sceneRoot:string=\"\";\r\n    static debug:boolean=false;\r\n    static stat:boolean=false;\r\n    static physicsDebug:boolean=false;\r\n    static exportSceneToJson:boolean=true;\r\n    constructor(){}\r\n    static init(){\r\n        var reg: Function = Laya.ClassUtils.regClass;\r\n        reg(\"script/GameUI.ts\",GameUI);\r\n    }\r\n}\r\nGameConfig.init();","import TestShader from \"./TestShader\";\r\nimport GameConfig from \"../GameConfig\";\r\nimport GPUSkining from \"../GPUSkinning/GPUSkining\";\r\n\r\n class TestMain \r\n{\r\n    constructor() \r\n    {\r\n\t\tthis.InitLaya();\r\n\r\n\r\n\t\tif(Laya.Browser.onWeiXin)\r\n\t\t{\r\n\t\t\tLaya.URL.basePath = \"http://192.168.100.205:8900/bin/\";\r\n\t\t}\r\n\t\t\r\n\t\t// 启动游戏\r\n\t\tnew TestShader();\r\n\t\t\r\n\t\t\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\tInitLaya()\r\n\t{\r\n\t\t//根据IDE设置初始化引擎\t\t\r\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\r\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\r\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\r\n\t\tLaya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\r\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\r\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\r\n\t\tLaya.stage.alignV = GameConfig.alignV;\r\n\t\tLaya.stage.alignH = GameConfig.alignH;\r\n\t\t//兼容微信不支持加载scene后缀场景\r\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\r\n\r\n\t\tLaya.Shader3D.debugMode = true;\r\n\r\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\r\n\t\t// if (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\r\n\t\tif (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\r\n\t\tif (GameConfig.stat) Laya.Stat.show();\r\n\t\tLaya.alertGlobalError = true;\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\n//激活启动类\r\nnew TestMain();"],"names":["Shader3D","Vector4","Vector3","VertexMesh","Matrix4x4","Quaternion","Byte","SubShader","RenderState","LayaGL"],"mappings":"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"}